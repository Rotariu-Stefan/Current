(this.webpackJsonpftsite=this.webpackJsonpftsite||[]).push([[0],{10:function(e,t,a){},13:function(e){e.exports=JSON.parse('{"serverLink":"https://tranquil-citadel-37714.herokuapp.com"}')},14:function(e,t,a){e.exports=a(21)},19:function(e,t,a){},21:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(12),s=a.n(o),l=a(1),c=a(3),i=a(2),u=a(13),d=function(e){return"".concat(e.getFullYear(),"-")+"".concat(e.getMonth()+1>9?(e.getMonth()+1).toString():"0".concat((e.getMonth()+1).toString()),"-")+"".concat(e.getDate()>9?e.getDate().toString():"0".concat(e.getDate().toString()))},m=function(){return u.serverLink},p={userid:0,username:"Guest",email:"guest@nomail.none",firstname:"John",lastname:"Doe",dob:d(new Date),sex:"1",describe:"placeholder",pic:"profileEmpty.png",diet:null,defaultmeals:"Breakfast,Lunch,Dinner",access:"Guest"},f=r.a.createContext({currentUser:p,changeMainPage:null,updateUser:null}),h=function(e){Object(c.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).render=function(){var e=n.state.isLogged,t=n.context.changeMainPage,a=n.context.currentUser,o=a.username,s=a.pic;return r.a.createElement("header",{className:"subblock boxShow"},r.a.createElement("img",{alt:"[NO LOGO]",className:"logo",src:"SitePics/head.png"}),r.a.createElement("div",{id:"titleArea",onClick:function(){return t("Home")}},r.a.createElement("h1",{id:"title"},"FoodTracker"),r.a.createElement("h3",{id:"subtitle"},"Define and Track your Food and diet goals on Your own terms!")),r.a.createElement("div",{className:"boxShow",id:"profileArea"},r.a.createElement("span",{onClick:function(){return t(e?"Profile":"Register")}},o,r.a.createElement("br",null),r.a.createElement("img",{alt:"[NO PIC]",src:"UserPics/".concat(s)})),r.a.createElement("span",{className:"navlink",onClick:function(){return t(e?"Profile":"Register")}},e?"Profile":"Register"),r.a.createElement("span",{className:"navlink",onClick:n.onLogClick},e?"Logout":"Login")))},n.onLogClick=function(){var e=n.state.isLogged,t=n.context,a=t.updateUser,r=t.changeMainPage;e?(a(null),r("Home")):r("Login")},n.updateUser=function(e){n.setState({isLogged:e})},n.state={isLogged:!1},n}return a}(r.a.Component);h.contextType=f;var E=h,g=function(e){Object(c.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).render=function(){return r.a.createElement("nav",{className:"subblock boxShow"},r.a.createElement("span",{className:"navlink textHigh",onClick:function(){return e.context.changeMainPage("DailyMeals")}},"Daily Meals"),"|",r.a.createElement("span",{className:"navlink textHigh",onClick:function(){return e.context.changeMainPage("YourFood")}},"Your Food"),"|",r.a.createElement("span",{className:"navlink textHigh",onClick:function(){return e.context.changeMainPage("YourPlans")}},"Your Plans"),"|",r.a.createElement("span",{className:"navlink textHigh",onClick:function(){return e.context.changeMainPage("YourStats")}},"Your Stats"),"|",r.a.createElement("span",{className:"navlink textHigh",onClick:function(){return e.context.changeMainPage("GlobalStats")}},"Global Stats"),"|",r.a.createElement("span",{className:"navlink textHigh",onClick:function(){return e.context.changeMainPage("GlobalData")}},"Users Data"))},e}return a}(r.a.Component);g.contextType=f;var y=g,b=function(){return r.a.createElement("main",{className:"boxShow"},r.a.createElement("div",{className:"subblock"},r.a.createElement("h1",null,"WELCOME !"),r.a.createElement("p",null,"This is a website where you can track what you eat. You can Design ,Customize and Organize foods, meals and diet plans to your liking, and also track various self defined goals with a high degree of customisability and have easy access to helpful information."),r.a.createElement("p",null,r.a.createElement("br",null),"While preselecting foods through scanning codes and importing lists from various places will be available in the future, the Main Functionality of this site revolves around providing a a simple practical and flexible framework where YOU Define and Organize your stuff and can potentially completely ignore anything else."),r.a.createElement("p",null,r.a.createElement("br",null),"This has been entirely made from scratch by me (o/ hi!) mostly because other similar websites seem to want to box you into a way of doing things and predefine certain goals for you while also expecting you to pick from many predefined items. I found this rather confusing or restrictive and annoying. BUT here if you feel like making a user called Worm69 that eats 2grams of Dirt and Fungus 30 times a day you can do that!(please don't tho..)"),r.a.createElement("br",null),r.a.createElement("p",null,r.a.createElement("span",null,"As a Guest you have Certain Limitations:")," You can only log food in a specific time period and also have limits on how many entries you can asign to your daily meals. The Guest is only here to quick demonstrations on how this site functions and the data you enter is NOT Realiable/Persistent for long terms. (also as this site is currently running for free and will receive major changes-including the database- The Data you put in might get wiped/changed in the future)."),r.a.createElement("p",null,r.a.createElement("br",null),"This site is in constant development and tends to get frequent (often daily) updates. Right now you can make an account, change profile details, and in DailyMeals section you can add/change Meals to days you select, and add Food Items to Meals. You can do this either by searching through a list of Foods(right now comprises of what I've eaten lately) or create your own foods. Right now you can only add simple foods with a name and brand, macronutrients and size/portion information. More will come.",r.a.createElement("br",null)),r.a.createElement("p",null,r.a.createElement("br",null),"But you can attach notes to days and meals. Notes consist of a score, a title and text. You use this system to write how you felt about a meal, keep track of alergies/odd reactions/blood sugar or really anything you want. You can find a list of my notes but they probably won't help much because it's personal to me. The list will change to something more general/better later on.")))},v=(a(19),a(4)),S=a.n(v),N=a(5),w=a(6),x=a(9),F=a(7),C=function(e){Object(c.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.props.signalSelect&&n.props.selectedChanged(null,Object(F.a)(n))},n.render=function(){var e=n.state,t=e.isSelected,a=e.note,o=a.score,s=a.title,l=a.notetext;return r.a.createElement("div",{className:"noteView boxShow lineDown".concat(t?" nSelected":""),onClick:function(e){return n.props.selectedChanged(e,Object(F.a)(n))}},r.a.createElement("img",{alt:"S=".concat(o),className:"scoreImg",src:"SitePics/star".concat(o,".png")}),r.a.createElement("span",{className:"title"},s),r.a.createElement("span",null,"--".concat(l||"<Empty>")))},n.toggleSelected=function(){return n.setState({isSelected:!n.state.isSelected})},n.state={note:e.note,isSelected:!1},n}return a}(r.a.Component),k=function(e){Object(c.a)(a,e);var t=Object(i.a)(a);function a(e){var n;Object(l.a)(this,a),(n=t.call(this,e)).onRemoveNote=function(){return n.props.removeNote},n.onEditAddNote=function(e){e?n.setState({isEdit:!0,isEditValues:!0}):(n.setState({isEdit:!0,isEditValues:!1}),n.loadNoteViews(""))},n.onSelectedNoteViewChanged=function(e,t){var a=n.state.selectedNoteView;t!==a&&(a&&a.toggleSelected(),t.toggleSelected(),n.setState({selectedNoteView:t}))},n.searchNoteViews=function(){var e=Object(N.a)(S.a.mark((function e(t,a){var o,s,l,c,i,u,d,p;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a<n.state.searchCounter)){e.next=2;break}return e.abrupt("return");case 2:return o=n.state.noteViewCounter,s=0===n.context.currentUser.userid?1:n.context.currentUser.userid,e.next=6,fetch("".concat(m(),"/dailymeals/notesearch"),{method:"get",headers:{"content-type":"application/json",userid:s,search:t}});case 6:return l=e.sent,e.next=9,l.json();case 9:if(l=e.sent,!(a<n.state.searchCounter)){e.next=12;break}return e.abrupt("return");case 12:c=[],i=!0,u=Object(x.a)(l);try{for(u.s();!(d=u.n()).done;)p=d.value,i?(c.push(r.a.createElement(C,{key:o++,note:p,selectedChanged:n.onSelectedNoteViewChanged,signalSelect:!0})),i=!1):c.push(r.a.createElement(C,{key:o++,note:p,selectedChanged:n.onSelectedNoteViewChanged}))}catch(f){u.e(f)}finally{u.f()}n.setState({noteViews:c,noteViewCounter:o,noteViewsIsLoading:!1});case 17:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.loadNoteViews=function(e){n.setState({noteViews:[],noteViewsIsLoading:!0,searchCounter:n.state.searchCounter+1});var t=n.state.searchCounter+1;setTimeout((function(){return n.searchNoteViews(e,t)}),150)},n.setNote=function(){var e=n.state,t=e.isEditValues,a=e.newScore,r=e.newTitle,o=e.newText;t?(n.props.updateAttach({score:a,title:""===r?"Untitled":r,notetext:o}),n.setState({note:{score:a,title:""===r?"Untitled":r,notetext:o},isEdit:!1})):(n.props.updateAttach(n.state.selectedNoteView.state.note),n.setState({note:n.state.selectedNoteView.state.note,isEdit:!1}))},n.state={note:e.note,isEdit:!1,isEditValues:!1,selectedNoteView:null,noteViews:[],noteViewsIsLoading:!0,noteViewCounter:0,searchCounter:0,newScore:0,newTitle:"",newText:""},n.options=[];for(var o=-5;o<=5;o+=1)n.options.push(r.a.createElement("option",{key:o},o));return n}return Object(w.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.isEdit,n=t.isEditValues,o=t.note,s=t.noteViews,l=t.noteViewsIsLoading,c=t.newScore;if(this.props.isMin)return r.a.createElement("hr",null);if(a)return r.a.createElement("div",{className:"noteEdit boxShow"},r.a.createElement("div",{className:"editChoices"},r.a.createElement("input",{checked:!n,name:"".concat(this._reactInternalFiber.key,"_radio"),type:"radio",value:"select",onChange:function(t){return e.onEditAddNote(!1)}}),"Select",r.a.createElement("input",{checked:n,name:"".concat(this._reactInternalFiber.key,"_radio"),type:"radio",value:"values",onChange:function(t){return e.onEditAddNote(!0)}}),"Values",r.a.createElement("button",{onClick:function(){e.setState({isEdit:!1})}},"Cancel")),n?r.a.createElement("div",{className:"newNote"},r.a.createElement("span",null,"Score:"),r.a.createElement("div",null,r.a.createElement("select",{defaultValue:0,onChange:function(t){return e.setState({newScore:t.currentTarget.value})}},this.options),r.a.createElement("img",{alt:"S=".concat(c),className:"scoreImg",src:"SitePics/star".concat(c,".png")}),r.a.createElement("button",{onClick:this.setNote},"Apply New Note")),r.a.createElement("span",null,"Title:"),r.a.createElement("input",{maxLength:"50",type:"text",onChange:function(t){return e.setState({newTitle:t.currentTarget.value})}}),r.a.createElement("span",null,"Text:"),r.a.createElement("textarea",{maxLength:"250",onChange:function(t){return e.setState({newText:t.currentTarget.value})}})):r.a.createElement("div",{className:"selectNote"},r.a.createElement("div",{className:"noteSearch"},"Search:",r.a.createElement("input",{maxLength:"100",type:"text",onChange:function(t){return e.loadNoteViews(t.currentTarget.value)}}),r.a.createElement("button",{onClick:this.setNote},"Select Note")),r.a.createElement("div",{className:"noteSearchArea"},l?"LOADING...":s)));if(o){var i=o.score,u=o.title,d=o.notetext;return r.a.createElement("div",{className:"note boxShow"},r.a.createElement("img",{alt:"S=".concat(i),className:"scoreImg",src:"SitePics/star".concat(i,".png")}),r.a.createElement("img",{alt:"X",className:"managerImg",src:"SitePics/icons8-close-window-16.png",onClick:this.onRemoveNote}),r.a.createElement("img",{alt:"New",className:"managerImg",src:"SitePics/icons8-edit-16.png",onClick:function(){return e.onEditAddNote(!0)}}),r.a.createElement("span",{className:"title"},u),r.a.createElement("span",{className:"notetext"},d?"--".concat(d):""))}return r.a.createElement("div",{className:"note boxShow"},"No Note",r.a.createElement("img",{alt:"N",className:"managerImg",src:"SitePics/icons8-plus-16.png",onClick:this.onEditAddNote}))}}]),a}(r.a.Component);k.contextType=f;var D=k,M=a(8),O=function(e){Object(c.a)(a,e);var t=Object(i.a)(a);function a(e){var n;Object(l.a)(this,a),(n=t.call(this,e)).onRemoveFoodEntry=function(){var e=n.state,t=e.fatRes,a=e.carbsRes,r=e.proteinRes;n.props.updateRemoveFoodEntry(Object(F.a)(n)),n.props.updateMealMacros(-t,-a,-r)},n.getMacroRes=function(e,t){var a=t.amount,n=t.measure,r=t.sizeinfo;return Number("Pieces"===n?null===r?(t[e]*a).toFixed(1):(t[e]*a*r/100).toFixed(1):(t[e]*a/100).toFixed(1))};var r={};return e.foodEntry?r=e.foodEntry:e.foodItem?((r=e.foodItem).amount=e.amount,r.measure=e.measure):r=Object(M.a)({},a.defaultFoodEntry),n.state={foodEntry:r,fatRes:n.getMacroRes("fat",r),carbsRes:n.getMacroRes("carbs",r),proteinRes:n.getMacroRes("protein",r)},n}return Object(w.a)(a,[{key:"componentDidMount",value:function(){var e=this.state,t=e.fatRes,a=e.carbsRes,n=e.proteinRes;this.props.updateMealMacros&&this.props.updateMealMacros(t,a,n)}},{key:"componentDidUpdate",value:function(){this.props.foodEntry!==this.state.foodEntry&&this.setState({foodEntry:this.props.foodEntry})}},{key:"render",value:function(){var e=this.state,t=e.foodEntry,n=e.fatRes,o=e.carbsRes,s=e.proteinRes,l=t||a.defaultFoodEntry,c=l.foodname,i=l.brand,u=l.amount,d=l.fat,m=l.carbs,p=l.protein,f=i?"@".concat(i):"",h=this.props.readOnly?"":r.a.createElement("img",{alt:"X",className:"managerImg",src:"SitePics/icons8-closeM-window-16.png",onClick:this.onRemoveFoodEntry});return r.a.createElement("div",{className:"foodEntry ".concat(this.props.className)},r.a.createElement("span",{className:"amount"},u),r.a.createElement("span",{className:"name_brand"},"".concat(c," ").concat(f)),r.a.createElement("span",{className:"macro"},"".concat(d,"/").concat(m,"/").concat(p)),r.a.createElement("span",{className:"macroRes"},"".concat(n,"/").concat(o,"/").concat(s),h))}}]),a}(r.a.Component);O.defaultProps={foodEntry:O.defaultFoodEntry,readOnly:!1,updateMealMacros:null,updateRemoveFoodEntry:null},O.defaultFoodEntry={foodid:0,foodname:"Nothing",brand:"Nobody",fat:0,carbs:0,protein:0,sizeinfo:null,userid:0,pic:null,price:0,isdish:!1,note:null,amount:1,measure:"Pieces"};var P=O,I=function(e){Object(c.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onMealSelect=function(){return n.props.updateSelectedMeal(Object(F.a)(n))},n.onRemoveMeal=function(){var e=n.state,t=e.fat,a=e.carbs,r=e.protein;n.props.updateRemoveMeal(Object(F.a)(n)),n.props.updateDayMacros(-t,-a,-r)},n.removeNote=function(){var e=n.state.mealEntry;e.note=null,n.setState({mealEntry:e}),n.props.updateMealNote()},n.updateAttach=function(e){var t=n.state.mealEntry;t.note=e,n.setState({mealEntry:t})},n.updateRemoveFoodEntry=function(e){var t=n.state.mealEntry;t.foodentries.splice(e._reactInternalFiber.key,1),n.setState({mealEntry:t})},n.updateNewFoodEntry=function(e){var t=n.state.mealEntry;return t.foodentries.push(e),n.setState({mealEntry:t}),""},n.updateMealMacros=function(e,t,a){var r=n.state.mealEntry.portion;n.fat+=e*r,n.carbs+=t*r,n.protein+=a*r,n.setState({fat:n.fat,carbs:n.carbs,protein:n.protein}),n.props.updateDayMacros(e,t,a)},n.toggleHighlight=function(){return n.setState({isHighlighted:!n.state.isHighlighted})},n.toggleMinMax=function(e){n.setState({isMin:!n.state.isMin}),e.stopPropagation()},n._getFoodEntries=function(){var e=n.state.mealEntry;return n.foodEntriesCounter=0,e.foodentries.map(n._getFoodEntry)},n._getFoodEntry=function(e){var t=r.a.createElement(P,{key:n.foodEntriesCounter,className:"lineDown",foodEntry:e,updateMealMacros:n.updateMealMacros,updateRemoveFoodEntry:n.updateRemoveFoodEntry});return n.foodEntriesCounter+=1,t},n.fat=0,n.carbs=0,n.protein=0,n.state={mealEntry:e.mealEntry?e.mealEntry:Object(M.a)({},a.defaultMealEntry),fat:0,carbs:0,protein:0,isHighlighted:!1,isMin:!1},n.foodEntriesCounter=0,n}return Object(w.a)(a,[{key:"componentDidUpdate",value:function(){this.props.mealEntry!==this.state.mealEntry&&this.setState({mealEntry:this.props.mealEntry})}},{key:"render",value:function(){var e=this.state,t=e.mealEntry,a=e.isHighlighted,n=e.isMin,o=e.fat,s=e.carbs,l=e.protein,c=t.mealname,i=t.note,u=t.portion;return r.a.createElement("div",{className:"mealArea boxShow".concat(a?" highlight":""),role:"menuitem",tabIndex:"0",onClick:this.onMealSelect},r.a.createElement("div",{className:"mealTitle"},"".concat(c," (x").concat(u,")"),r.a.createElement("img",{alt:"X",className:"managerImg",src:"SitePics/icons8-cancel-20.png",onClick:this.onRemoveMeal}),r.a.createElement("img",{alt:n?"+":"-",className:"managerImg",src:n?"SitePics/icons8-plus-20.png":"SitePics/icons8-minus-20.png",onClick:this.toggleMinMax})),r.a.createElement(D,{key:this._reactInternalFiber.key+(i?"_note":"0"),isMin:n,note:i,removeNote:this.removeNote,updateAttach:this.updateAttach}),r.a.createElement("div",{className:"foodEntries lineDown".concat(n?" hidden":"")},this._getFoodEntries()),r.a.createElement("div",{className:"mealTotal"},r.a.createElement("span",null,"Meal Total:"),r.a.createElement("span",null,"".concat(o.toFixed(1),"|").concat(s.toFixed(1),"|").concat(l.toFixed(1)))))}}]),a}(r.a.Component);I.defaultMealEntry={mealname:"New Meal",portion:1,note:null,foodentries:[]};var A=I,j=function(e){Object(c.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onLoadDailyMeals=function(e){var t=n.context.currentUser,a="string"===typeof e?e:e.currentTarget.value;"Guest"===t.access&&(new Date(a)<new Date("2020-06-04")||new Date(a)>new Date("2020-06-11"))?alert("As Guest user you can Only select from the 2020-06-04 to 2020-06-11 period!"):(n.fat=0,n.carbs=0,n.protein=0,n.setState({mealareaIsLoading:!0,selectedMeal:null,dayEntry:null,dayFat:0,dayCarbs:0,dayProtein:0},Object(N.a)(S.a.mark((function e(){var r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(m(),"/dailymeals"),{method:"get",headers:{"content-type":"application/json",reqdate:a,userid:t.userid}});case 2:return r=e.sent,e.next=5,r.json();case 5:r=e.sent,n.setState({mealareaIsLoading:!1,selectedDay:a,dayEntry:r});case 7:case"end":return e.stop()}}),e)})))))},n.onDayOffset=function(e){var t=n.state.selectedDay,a=new Date(t);a.setDate(a.getDate()+Number(e.currentTarget.getAttribute("data-offset"))),n.onLoadDailyMeals(d(a))},n.onCommit=function(){n.setState({searchareaIsLoading:!0},Object(N.a)(S.a.mark((function e(){var t,a,r,o,s,l;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state,a=t.dayEntry,r=t.selectedDay,o=n.context.currentUser,(s=a).userid=o.userid,s.date=r,e.next=7,fetch("".concat(m(),"/dailymeals"),{method:"put",headers:{"content-type":"application/json"},body:JSON.stringify(s)});case 7:return l=e.sent,e.next=10,l.json();case 10:l=e.sent,n.onLoadDailyMeals(n.state.selectedDay),console.log(l),"string"!==typeof l?alert("Successfully entered date for day ".concat(r,"!\n --You can view resulting entry in the console")):alert("There was an Error!"),n.setState({searchareaIsLoading:!1});case 15:case"end":return e.stop()}}),e)}))))},n.onAddNewMeal=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=n.context.currentUser,r=n.state.dayEntry;if("Guest"===a.access&&5===r.meals.length)return"As Guest user you cannot enter more than 5 Meals per day!";if(isNaN(t))return"Must Enter Valid Number for Portion!";var o={mealname:""===e?"Meal".concat(r.meals.length+1):e,portion:""===t?1:t,noteid:null,foodentries:[]};return r.meals.push(o),n.setState({dayEntry:r}),""},n.updateRemoveMeal=function(e){var t=n.state.dayEntry;t.meals.splice(e._reactInternalFiber.key,1),n.setState({dayEntry:t})},n.updateSelectedMeal=function(e){var t=n.state.selectedMeal;null===e&&null!==t?(t.toggleHighlight(),n.setState({selectedMeal:null})):e!==t&&(t&&t.toggleHighlight(),e.toggleHighlight(),n.setState({selectedMeal:e}),n.props.updateDishSelect(!1))},n.updateNewFoodEntry=function(e){var t=n.state.selectedMeal,a=n.context.currentUser;return null===t?"Must select a Meal or Dish!":"Guest"===a.access&&t.state.mealEntry.foodentries.length>=7?"As Guest user you cannot enter more than 7 Food Items per Meal!":(t.updateNewFoodEntry(e),"")},n.updateDayMacros=function(e,t,a){n.fat+=e,n.carbs+=t,n.protein+=a,n.setState({dayFat:n.fat,dayCarbs:n.carbs,dayProtein:n.protein})},n.updateDayNote=function(e){var t=n.state.dayEntry;t.note=e,n.setState({dayEntry:t})},n.removeNote=function(){var e=n.state.dayEntry;e.note=null,n.setState({dayEntry:e})},n._getMealEntries=function(){var e=n.state.dayEntry;return n.mealsEntriesCounter=0,e.meals.map(n._getMealEntry)},n._getMealEntry=function(e){var t=r.a.createElement(A,{key:n.mealsEntriesCounter,mealEntry:e,updateDayMacros:n.updateDayMacros,updateMealFoodEntries:n.updateMealFoodEntries,updateMealNote:n.updateMealNote,updateRemoveMeal:n.updateRemoveMeal,updateSelectedMeal:n.updateSelectedMeal});return n.mealsEntriesCounter+=1,t},n.setInitialState=function(){var e="Guest"===n.context.currentUser.access?new Date("2020-06-07"):new Date;n.setState({selectedDay:d(e)}),setTimeout((function(){n.onLoadDailyMeals(n.state.selectedDay)}),0)},n.fat=0,n.carbs=0,n.protein=0,n.state={selectedDay:null,dayEntry:{},dayFat:0,dayCarbs:0,dayProtein:0,selectedMeal:null,mealareaIsLoading:!0},n.mealsEntriesCounter=0,n}return Object(w.a)(a,[{key:"componentDidMount",value:function(){this.setInitialState()}},{key:"render",value:function(){var e=this.state,t=e.selectedDay,a=e.dayEntry,n=e.mealareaIsLoading,o=e.dayFat,s=e.dayCarbs,l=e.dayProtein,c=n?"LOADING...":this._getMealEntries(),i=n?"LOADING...":r.a.createElement(D,{key:"D".concat(a.note?a.note.noteid:"D0"),note:a.note,removeNote:this.removeNote,updateDayNote:this.updateDayNote});return r.a.createElement("div",{className:"dayArea subblock boxShow"},r.a.createElement("div",{className:"dayHeader"},r.a.createElement("div",{className:"datepick boxShow"},r.a.createElement("span",{className:"textHigh"},"Day: "),r.a.createElement("button",{className:"ftButton","data-offset":"-1",disabled:n,onClick:this.onDayOffset},"<"),r.a.createElement("input",{className:"selectedDay",disabled:n,type:"date",value:t,onChange:this.onLoadDailyMeals}),r.a.createElement("button",{className:"ftButton","data-offset":"1",disabled:n,onClick:this.onDayOffset},">")),i),r.a.createElement("div",{className:"mealsArea"},c),r.a.createElement("hr",null),r.a.createElement("div",{className:"dayTotal"},r.a.createElement("span",null,"Day Total:"),r.a.createElement("span",null,"".concat(o.toFixed(1),"||").concat(s.toFixed(1),"||").concat(l.toFixed(1)))),r.a.createElement("button",{className:"ftButton",disabled:n,onClick:this.onCommit},"COMMIT DAY!"))}}]),a}(r.a.Component);j.contextType=f;var _=j,L=function(e){Object(c.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onSelectedFoodChanged=function(){return n.props.updateSelectedFood(Object(F.a)(n))},n.toggleSelected=function(){return n.setState({isSelected:!n.state.isSelected})},n.state={foodItem:e.foodItem?e.foodItem:Object(M.a)({},a.defaultFoodItem),isSelected:!1},n}return Object(w.a)(a,[{key:"componentDidMount",value:function(){this.props.signalSelect&&this.onSelectedFoodChanged(this)}},{key:"componentDidUpdate",value:function(){this.props.foodItem!==this.state.foodItem&&this.setState({foodItem:this.props.foodItem})}},{key:"render",value:function(){var e=this.state,t=e.foodItem,a=e.isSelected,n=t.foodname,o=t.brand,s=t.fat,l=t.carbs,c=t.protein,i=a?" feSelected":"",u=null===t.sizeinfo?"1":"100g";return r.a.createElement("div",{className:"foodItem lineDown".concat(i),role:"menuitem",tabIndex:"0",onClick:this.onSelectedFoodChanged},r.a.createElement("span",{className:"name_brand"},"".concat(n," ").concat(o?"@".concat(o):"")),r.a.createElement("span",{className:"macro"},"".concat(s,"/").concat(l,"/").concat(c)),r.a.createElement("span",{className:"per"},u))}}]),a}(r.a.Component);L.defaultProps={signalSelect:!1},L.defaultFoodItem={foodid:0,foodname:"Nothing",brand:"Nowhere",fat:0,carbs:0,protein:0,sizeinfo:null,userid:0,pic:"empty.png",price:0,isdish:!1,note:null};var T=L,R=function(e){Object(c.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onLoadSearchFoodItems=function(e,t){n.setState({sFoodItems:[],searchareaIsLoading:!0,searchCounter:n.state.searchCounter+1});var a=n.state.searchCounter+1;setTimeout(Object(N.a)(S.a.mark((function r(){var o,s,l,c=arguments;return S.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!((o=c.length>0&&void 0!==c[0]?c[0]:a)<n.state.searchCounter)){r.next=3;break}return r.abrupt("return");case 3:return s=n.context.currentUser,r.next=6,fetch("".concat(m(),"/dailymeals/foodsearch"),{method:"get",headers:{"content-type":"application/json",userid:s.userid,search:e,isall:t}});case 6:return l=r.sent,r.next=9,l.json();case 9:if(l=r.sent,!(o<n.state.searchCounter)){r.next=12;break}return r.abrupt("return");case 12:0===l.length&&n.setState({selectedFood:null,measure:"---",amount:""}),n.setState({sFoodItems:l,searchareaIsLoading:!1});case 14:case"end":return r.stop()}}),r)}))),150)},n.onSearchKey=function(e){var t=n.state,a=t.selectedFood,r=t.sFoodItems;switch(e.key){case"Enter":n.onAddNewFoodEntry(),e.preventDefault();break;case"Tab":document.querySelector(".amountSize").select(),e.preventDefault();break;case"Escape":document.querySelector(".search").value="",e.preventDefault();break;case"ArrowUp":if(a)for(var o=0;o<r.length;o+=1)if(r[o].key===a._reactInternalFiber.key){if(0===o)break;document.querySelectorAll(".foodItem")[o-1].click()}e.preventDefault();break;case"ArrowDown":if(a)for(var s=0;s<r.length;s+=1)if(r[s].key===a._reactInternalFiber.key){if(s===r.length-1)break;document.querySelectorAll(".foodItem")[s+1].click()}e.preventDefault()}},n.onAmountKey=function(e){switch(e.key){case"Enter":n.onAddNewFoodEntry(),e.preventDefault();break;case"Tab":document.querySelector(".search").select(),e.preventDefault();break;case"Escape":document.querySelector(".amountSize").value="",e.preventDefault();break;case"ArrowUp":case"ArrowDown":console.log(e.key),e.preventDefault()}},n.onAddNewFoodEntry=function(){var e=n.state,t=e.newFoodForm,a=e.newFoodItem,r=e.selectedFood,o=e.amount,s=e.measure,l=n.addNewFoodEntryChecks();if(l)alert(l);else{var c=t?a:r.state.foodItem;c.amount=o||document.querySelector(".amountSize").placeholder,c.measure=s,n.props.updateAddNewFoodEntry(c)}},n.onAddNewMeal=function(){var e=document.querySelector(".newMName").value,t=document.querySelector(".newMPortion").value;n.props.onAddNewMeal(e,t)},n.onToggleFoodForm=function(){var e=n.state.newFoodForm;e?n.setState({newFoodForm:!e}):n.setState({newFoodForm:!0,selectedFood:null,measure:"Grams",amount:100})},n.onChangeFoodValue=function(e){var t=n.state.newFoodItem,a=e.currentTarget.value,r=e.currentTarget.getAttribute("data-field"),o=document.querySelector(".PSInput");switch(r){case"per":"1Piece"===a?(o.disabled=!0,o.value="",t.sizeinfo=null,n.setState({amount:1})):(o.disabled=!1,o.value=100,t.sizeinfo=100,n.setState({amount:100}));break;case"isdish":t.foodentries=!0===a?[]:null;break;case"sizeinfo":t[r]=""===a?null:a;break;case"fat":t[r]=""===a?0:a;break;default:t[r]=a}n.setState({newFoodItem:t,measure:null===t.sizeinfo?"Pieces":"Grams"})},n.addNewFoodEntryChecks=function(){var e=n.state,t=e.newFoodForm,a=e.newFoodItem,r=e.selectedFood,o=e.amount,s=e.measure;if(t){if(""===a.foodname)return"New Food must have a Name !";var l=Number(a.fat)+Number(a.carbs)+Number(a.protein);if(isNaN(l)||"Grams"===s&&(l>100||l<=0))return"Macro value are wrong!";if(isNaN(a.price))return"Price value is wrong!";if(isNaN(a.sizeinfo)||a.sizeinfo<0)return"Piece Size value is wrong!"}else if(null===r)return"Must select a Food Item !";return isNaN(o)?"Must Enter Valid Number for Amount!":""},n.updateSelectedFood=function(e){var t=n.state.selectedFood;e!==t&&(t&&t.toggleSelected(),e.toggleSelected(),n.setState({selectedFood:e,amount:"",measure:null===e.state.foodItem.sizeinfo?"Pieces":"Grams"}),n.props.updateSelectedFood(e))},n.resetAfterAdd=function(){var e=n.state.newFoodForm,t=n.context.currentUser;e?n.setState({newFoodItem:{foodname:"",brand:"",fat:0,carbs:0,protein:0,price:0,sizeinfo:100,isdish:!1,pic:"empty.png",userid:t.userid,noteid:null,foodentries:null}}):document.querySelector(".search").select()},n.setInitialState=function(){var e=n.context.currentUser;n.setState({newFoodItem:{foodname:"",brand:"",fat:0,carbs:0,protein:0,price:0,sizeinfo:100,isdish:!1,pic:"empty.png",userid:e.userid,noteid:null,foodentries:null}}),setTimeout((function(){n.onLoadSearchFoodItems("",!1)}),0)},n._currentEntry=function(){var e=n.state,t=e.selectedFood,a=e.measure,o=e.newFoodForm,s=e.newFoodItem,l=t?t.state.foodItem:T.defaultFoodItem,c=o?s:l;return c.measure=a,c.amount=n._getAmountCurrent(),r.a.createElement(P,{foodEntry:c,readOnly:"true"})},n._getAmountCurrent=function(){var e=n.state.amount;return e||n._getAmountDefault()},n._getAmountDefault=function(){var e=n.state,t=e.selectedFood,a=e.measure;if(!t)return 0;if("Pieces"===a)return 1;var r=t.state.foodItem.sizeinfo;return 0===r?100:r},n._getMeasureVisible=function(e){var t=n.state.selectedFood;if(!t)return"hidden";var a=t.state.foodItem;return"Grams"===e?null===a.sizeinfo?"hidden":"":"Pieces"===e&&0===a.sizeinfo?"hidden":""},n._getFoodItems=function(){var e=n.state.sFoodItems;return n.foodItemsCounter=0,e.map(n._getFoodItem)},n._getFoodItem=function(e){var t=r.a.createElement(T,{key:n.foodItemsCounter,foodItem:e,signalSelect:0===n.foodItemsCounter,updateSelectedFood:n.updateSelectedFood});return n.foodItemsCounter+=1,t},n.newFoodKey="mustchange",n.state={selectedFood:null,amount:"",measure:"---",searchareaIsLoading:!0,searchCounter:0,newFoodForm:!1,newFoodItem:null},n.foodItemsCounter=0,n}return Object(w.a)(a,[{key:"componentDidMount",value:function(){this.setInitialState()}},{key:"render",value:function(){var e=this,t=this.state,a=t.amount,n=t.measure,o=t.mealareaIsLoading,s=t.searchareaIsLoading,l=t.newFoodForm,c=s?"LOADING...":this._getFoodItems();return r.a.createElement("div",{className:"addFoodArea subblock boxShow"},l?r.a.createElement("div",{className:"newFoodForm"},r.a.createElement("div",{className:"newFoodHeader"},r.a.createElement("span",{className:"textHigh"},"Create New Food:"),r.a.createElement("button",{className:"ftButton",onClick:this.onToggleFoodForm},"+Select")),r.a.createElement("span",null,"Name:"),r.a.createElement("input",{"data-field":"foodname",maxLength:"50",placeholder:"name",type:"text",onChange:this.onChangeFoodValue}),r.a.createElement("span",null,"Brand:"),r.a.createElement("input",{"data-field":"brand",maxLength:"50",placeholder:"brand",type:"text",onChange:this.onChangeFoodValue}),r.a.createElement("span",null,"Macros:"),r.a.createElement("div",null,r.a.createElement("input",{"data-field":"fat",maxLength:"5",placeholder:"0",type:"text",onChange:this.onChangeFoodValue}),r.a.createElement("span",null,"Fat"),r.a.createElement("input",{"data-field":"carbs",maxLength:"5",placeholder:"0",type:"text",onChange:this.onChangeFoodValue}),r.a.createElement("span",null,"Carbs"),r.a.createElement("input",{"data-field":"protein",maxLength:"5",placeholder:"0",type:"text",onChange:this.onChangeFoodValue}),r.a.createElement("span",null,"Protein")),r.a.createElement("span",null,"Per:"),r.a.createElement("div",null,r.a.createElement("select",{className:"smallerInput","data-field":"per",onChange:this.onChangeFoodValue},r.a.createElement("option",null,"100Grams"),r.a.createElement("option",null,"1Piece")),r.a.createElement("span",null,"Piece Size:"),r.a.createElement("input",{className:"PSInput smallerInput","data-field":"sizeinfo",defaultValue:"100",maxLength:"5",placeholder:"null",type:"text",onChange:this.onChangeFoodValue})),r.a.createElement("span",null,"Price:"),r.a.createElement("div",null,r.a.createElement("input",{className:"smallerInput","data-field":"price",maxLength:"10",placeholder:"0",type:"text",onChange:this.onChangeFoodValue}),r.a.createElement("div",null,r.a.createElement("span",null,"Is Dish?"),r.a.createElement("input",{"data-field":"isdish",type:"checkbox",onChange:this.onChangeFoodValue}))),r.a.createElement("span",{className:"afaInfo"},"To add certain details (dish, composition, photo, note)or further edit foods go to Your Foods section.")):[r.a.createElement("div",{key:"searchForm",className:"searchForm boxShow"},r.a.createElement("span",{className:"textHigh"},"Search Food: "),r.a.createElement("input",{className:"isAll",maxLength:"100",type:"checkbox",onChange:function(t){return e.onLoadSearchFoodItems(document.querySelector(".search").value,t.currentTarget.checked)}}),"ALL",r.a.createElement("button",{className:"ftButton",onClick:this.onToggleFoodForm},"+New"),r.a.createElement("input",{className:"search",placeholder:"search text",type:"text",onChange:function(t){return e.onLoadSearchFoodItems(t.currentTarget.value,document.querySelector(".isAll").checked)},onKeyDown:this.onSearchKey})),r.a.createElement("div",{key:"searchResults",className:"searchResults boxShow"},c)],r.a.createElement("div",{className:"amountForm boxShow"},r.a.createElement("span",{className:"textHigh"},"Quantity: "),r.a.createElement("input",{className:"amountSize",disabled:s,maxLength:"10",placeholder:this._getAmountDefault(),type:"text",value:a,onChange:function(t){return e.setState({amount:t.currentTarget.value})},onKeyDown:this.onAmountKey}),r.a.createElement("select",{disabled:s,id:"measureSelect",value:n,onChange:function(t){return e.setState({measure:t.currentTarget.value})}},r.a.createElement("option",{className:this._getMeasureVisible("Grams")},"Grams"),r.a.createElement("option",{className:this._getMeasureVisible("Pieces")},"Pieces"),r.a.createElement("option",{className:"hidden"},"---"))),r.a.createElement("div",{className:"searchEntry boxShow"},r.a.createElement("span",{className:"textHigh lineDown"},"Current Entry:"),this._currentEntry(),r.a.createElement("button",{className:"ftButton",disabled:s,onClick:this.onAddNewFoodEntry},"ADD FOOD ENTRY")),r.a.createElement("hr",null),r.a.createElement("div",{className:"addMealArea"},r.a.createElement("div",null,r.a.createElement("span",{className:"textHigh"},"Meal Name:"),r.a.createElement("input",{className:"newMName",placeholder:"Meal#",type:"text"}),r.a.createElement("span",{className:"textHigh"},"Portion:"),r.a.createElement("input",{className:"newMPortion",maxLength:"5",placeholder:"1",type:"text"})),r.a.createElement("button",{className:"newMeal ftButton",disabled:o,onClick:this.onAddNewMeal},"ADD NEW MEAL")))}}]),a}(r.a.Component);R.contextType=f;var U=R,V=function(e){Object(c.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).render=function(){var e=n.state.selectedFoodDetails;if(!e)return r.a.createElement("div",{className:"foodDetailsArea subblock boxShow"},"LOADING...");var t=n.props.isDishSelected,a=e.foodname,o=e.brand,s=e.fat,l=e.carbs,c=e.protein,i=e.price,u=e.pic,d=(9*s+4*c+4*l).toFixed(1),m=t?" highlight":"",p=o?"@".concat(o):"",f=null===u?"empty.png":u;return r.a.createElement("div",{className:"foodDetailsArea subblock boxShow".concat(m),role:"menuitem",tabIndex:0,onClick:n.onDishSelect},r.a.createElement("div",{className:"foodDetailsHeader"},r.a.createElement("div",{className:"textHigh boxShow"},"".concat(a," ").concat(p))),r.a.createElement("div",{className:"foodPic boxShow"},r.a.createElement("img",{alt:"[NO FOOD PIC]",src:"FoodPics/".concat(f)})),r.a.createElement("div",{className:"foodInfo"},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("td",{colSpan:"2"},a)),r.a.createElement("tr",null,r.a.createElement("th",null,"Brand"),r.a.createElement("td",{colSpan:"2"},o||"--")),r.a.createElement("tr",null,r.a.createElement("th",null,"Macro"),r.a.createElement("th",null,"100g"),r.a.createElement("th",null,"1p"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Fat"),r.a.createElement("td",null,n._infoForMeasure("Grams",s)),r.a.createElement("td",null,n._infoForMeasure("Pieces",s))),r.a.createElement("tr",null,r.a.createElement("td",null,"Carbs"),r.a.createElement("td",null,n._infoForMeasure("Grams",l)),r.a.createElement("td",null,n._infoForMeasure("Pieces",l))),r.a.createElement("tr",null,r.a.createElement("td",null,"Protein"),r.a.createElement("td",null,n._infoForMeasure("Grams",c)),r.a.createElement("td",null,n._infoForMeasure("Pieces",c))),r.a.createElement("tr",null,r.a.createElement("td",null,"Calories"),r.a.createElement("td",null,n._infoForMeasure("Grams",d)),r.a.createElement("td",null,n._infoForMeasure("Pieces",d))),r.a.createElement("tr",null,r.a.createElement("td",null,"Price"),r.a.createElement("td",null,n._infoForMeasure("Grams",i)),r.a.createElement("td",null,n._infoForMeasure("Pieces",i))))),n._compositionOrNot(),n._dishButtonsOrNot()))},n.onDishSelect=function(){var e=n.state.selectedFoodDetails.isdish,t=n.props.isDishSelected;e&&!t&&n.props.updateDishSelect(!0)},n.onCalculateDishValues=function(){var e=n.state.selectedFoodDetails;n.setState({selectedFoodDetails:null},Object(N.a)(S.a.mark((function t(){var a,r,o,s,l,c,i,u,d,p;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=0,r=0,o=0,s=Object(x.a)(e.foodentries);try{for(s.s();!(l=s.n()).done;)c=l.value,i=c.amount,u=c.measure,d=c.sizeinfo,"Pieces"===u?null===d?(a+=c.fat*i,r+=c.carbs*i,o+=c.protein*i):(a+=c.fat*i*d/100,r+=c.carbs*i*d/100,o+=c.protein*i*d/100):"Grams"===u&&(a+=c.fat*i/100,r+=c.carbs*i/100,o+=c.protein*i/100)}catch(f){s.e(f)}finally{s.f()}return e.fat=Number(a.toFixed(1)),e.carbs=Number(r.toFixed(1)),e.protein=Number(o.toFixed(1)),t.next=10,fetch("".concat(m(),"/yourfoods"),{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify(e)});case 10:return p=t.sent,t.next=13,p.json();case 13:p=t.sent,n.setState({selectedFoodDetails:e},(function(){console.log(p),"string"!==typeof p?alert("Successfully calculated dish values: ".concat(e.foodname," ").concat(e.brand,"!\n\n            --You can view resulting entry in the console")):alert("There was an Error!")}));case 15:case"end":return t.stop()}}),t)}))))},n.onSaveDishIngr=function(){var e=n.state.selectedFoodDetails;n.setState({selectedFoodDetails:null},Object(N.a)(S.a.mark((function t(){var a,r,o,s,l;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(a={}).dishid=e.foodid,a.foodentries=[],r=Object(x.a)(e.foodentries);try{for(r.s();!(o=r.n()).done;)s=o.value,a.foodentries.push({foodid:s.foodid,amount:s.amount,measure:s.measure})}catch(c){r.e(c)}finally{r.f()}return t.next=7,fetch("".concat(m(),"/dailymeals/dishupdate"),{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify(a)});case 7:return l=t.sent,t.next=10,l.json();case 10:l=t.sent,n.setState({selectedFoodDetails:e},(function(){console.log(l),"string"!==typeof l?alert("Successfully saved dish: ".concat(e.foodname," ").concat(e.brand,"!\n\n                      --You can view resulting entry in the console")):alert("There was an Error!")}));case 12:case"end":return t.stop()}}),t)}))))},n.updateRemoveFoodEntry=function(e){var t=n.state.selectedFoodDetails;t.foodentries.splice(e._reactInternalFiber.key,1),n.setState({selectedFoodDetails:t})},n.updateNewFoodEntry=function(e){var t=n.state.selectedFoodDetails;return"Guest"===n.context.currentUser.access&&t.foodentries.length>=7?"As Guest user you cannot enter more than 7 Food Items per Dish!":(t.foodentries.push(e),n.setState({selectedFoodDetails:t}),"")},n.updateSelectedFoodDetails=function(e){return n.setState({selectedFoodDetails:null},Object(N.a)(S.a.mark((function t(){var a,r,o,s,l,c;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.foodItem,r=a.foodid,o=a.isdish,s=a.noteid,t.next=3,fetch("".concat(m(),"/dailymeals/fooddetails"),{method:"get",headers:{"content-type":"application/json",foodid:r,isdish:o,noteid:s||null}});case 3:return l=t.sent,t.next=6,l.json();case 6:l=t.sent,(c=e.state.foodItem).foodentries=l.foodentries,c.note=l.note,n.setState({selectedFoodDetails:c});case 11:case"end":return t.stop()}}),t)}))))},n._infoForMeasure=function(e,t){return(null===n.state.selectedFoodDetails.sizeinfo?"Pieces":"Grams")===e?"".concat(t):"--"},n._compositionOrNot=function(){return n.state.selectedFoodDetails.isdish?(n.foodEntriesCounter=0,r.a.createElement("div",{className:"foodEntries boxShow"},r.a.createElement("div",{className:"comp textHigh"},"Composition:"),n._getFoodEntries())):""},n._getFoodEntries=function(){var e=n.state.selectedFoodDetails;return n.foodEntriesCounter=0,e.foodentries.map(n._getFoodEntry)},n._getFoodEntry=function(e){var t=r.a.createElement(P,{key:n.foodEntriesCounter,foodEntry:e,updateRemoveFoodEntry:n.updateRemoveFoodEntry});return n.foodEntriesCounter+=1,t},n._dishButtonsOrNot=function(){return n.props.isDishSelected?r.a.createElement("div",{className:"tcenter"},r.a.createElement("button",{className:"ftButton",onClick:n.onSaveDishIngr},"SAVE ENTRIES"),r.a.createElement("button",{className:"ftButton",onClick:n.onCalculateDishValues},"CALC VALUES")):""},n.state={selectedFoodDetails:T.defaultFoodItem},n.foodEntriesCounter=0,n}return a}(r.a.Component);V.contextType=f;var G=V,H=function(e){Object(c.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).render=function(){var e=n.state.isDishSelected;return r.a.createElement("main",{className:"mainDailyMeals boxShow"},r.a.createElement(_,{ref:n.dayAreaRef,updateDishSelect:n.updateDishSelect}),r.a.createElement(U,{ref:n.addFoodAreaRef,updateAddNewFoodEntry:n.updateAddNewFoodEntry,updateSelectedFood:n.updateSelectedFood,onAddNewMeal:n.onAddNewMeal}),r.a.createElement(G,{ref:n.foodDetailsAreaRef,isDishSelected:e,updateDishSelect:n.updateDishSelect}))},n.onAddNewMeal=function(e,t){var a=n.state.dayArea.onAddNewMeal(e,t);a?alert(a):n.state.addFoodArea.resetAfterAdd()},n.updateSelectedFood=function(e){n.state.isDishSelected||n.state.foodDetailsArea.updateSelectedFoodDetails(e)},n.updateAddNewFoodEntry=function(e){var t="";(t=n.state.isDishSelected?n.state.foodDetailsArea.updateNewFoodEntry(e):n.state.dayArea.updateNewFoodEntry(e))?alert(t):n.state.addFoodArea.resetAfterAdd()},n.dayAreaRef=function(e){return n.setState({dayArea:e})},n.addFoodAreaRef=function(e){return n.setState({addFoodArea:e})},n.foodDetailsAreaRef=function(e){return n.setState({foodDetailsArea:e})},n.updateDishSelect=function(e){e&&n.state.dayArea.updateSelectedMeal(null),n.setState({isDishSelected:e})},n.state={dayArea:null,addFoodArea:null,foodDetailsArea:null,isDishSelected:!1},n}return a}(r.a.Component);H.contextType=f;var z=H,B=function(){return r.a.createElement("main",{className:"boxShow"},r.a.createElement("div",{className:"subblock"},r.a.createElement("h1",null,"YOUR FOOD!")))},Y=function(){return r.a.createElement("main",{className:"boxShow"},r.a.createElement("div",{className:"subblock"},r.a.createElement("h1",null,"YOUR PLANS!")))},q=function(){return r.a.createElement("main",{className:"boxShow"},r.a.createElement("div",{className:"subblock"},r.a.createElement("h1",null,"YOUR STATS!")))},J=function(){return r.a.createElement("main",{className:"boxShow"},r.a.createElement("div",{className:"subblock"},r.a.createElement("h1",null,"GLOBAL STATS!")))},K=function(){return r.a.createElement("main",{className:"boxShow"},r.a.createElement("div",{className:"subblock"},r.a.createElement("h1",null,"USERS DATA!")))},W=(a(10),function(e){Object(c.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).passRegex=/^(?=.*?\d)(?=.*?[a-zA-Z]).+$/,n.UNSAFE_componentWillMount=function(){var e=n.context.currentUser,t=e.username,a=e.email,r=e.firstname,o=e.lastname,s=e.dob,l=e.sex,c=e.describe,i=e.pic,u=e.diet;n.setState({username:t,email:a,firstname:r,lastname:o,dob:s,sex:l,describe:c,pic:i,diet:u})},n.render=function(){var e=n.state,t=e.username,a=e.email,o=e.firstname,s=e.lastname,l=e.dob,c=e.sex,i=e.describe,u=e.pic,d=e.diet,m=e.warning,p=e.isLoading;return r.a.createElement("main",{className:"mainUserForm boxShow"},r.a.createElement("form",{className:"userform subblock boxShow",onReset:n.cancelChangeProfile,onSubmit:n.onChangeProfile},r.a.createElement("h1",{className:"lineDown"},"Profile Info"),r.a.createElement("div",{className:"fields"},r.a.createElement("span",null,"Username:"),r.a.createElement("input",{minLength:"3",name:"username",type:"text",value:t,onChange:function(e){return n.setState({username:e.currentTarget.value})}}),r.a.createElement("span",{className:"warning".concat("username"===m?"":" hidden")},"Username is Already Taken!"),r.a.createElement("span",null,"Email:"),r.a.createElement("input",{name:"email",type:"text",value:a,onChange:function(e){return n.setState({email:e.currentTarget.value})}}),r.a.createElement("span",{className:"warning".concat("email"===m?"":" hidden")},"Email is Already Taken!"),r.a.createElement("div",{className:"personal"},r.a.createElement("div",null,r.a.createElement("img",{alt:"[NO PIC]",src:"UserPics/".concat(u)}),r.a.createElement("br",null),r.a.createElement("button",{className:"ftButton",disabled:p,onClick:n.browseUserPic},"Browse")),r.a.createElement("div",null,r.a.createElement("span",null,"Description:"),r.a.createElement("br",null),r.a.createElement("textarea",{placeholder:"Say who you are in a few short phrases..",value:i,onChange:function(e){return n.setState({describe:e.currentTarget.value})}}))),r.a.createElement("span",null,"First Name:"),r.a.createElement("input",{name:"firstname",type:"text",value:o,onChange:function(e){return n.setState({firstname:e.currentTarget.value})}}),r.a.createElement("span",null,"Last Name:"),r.a.createElement("input",{name:"lastname",type:"text",value:s,onChange:function(e){return n.setState({lastname:e.currentTarget.value})}}),r.a.createElement("div",null,r.a.createElement("span",null,"Sex:"),r.a.createElement("input",{checked:"1"===c,name:"sex",type:"radio",value:"male",onChange:function(e){return n.setState({sex:"1"})}}),r.a.createElement("span",null,"Male "),r.a.createElement("input",{checked:"0"===c,name:"sex",type:"radio",value:"female",onChange:function(e){return n.setState({sex:"0"})}}),r.a.createElement("span",null,"Female")),r.a.createElement("span",null,"Date Of Birth:"),r.a.createElement("input",{name:"dob",type:"date",value:l,onChange:function(e){return n.setState({dob:e.currentTarget.value})}}),r.a.createElement("span",{className:"warning".concat("dob"===m?"":" hidden")},"Incorrect date!"),r.a.createElement("span",null,"Diet Plans:"),r.a.createElement("select",{value:d||"none",onChange:function(e){return n.setState({diet:"none"===e.currentTarget.value?null:e.currentTarget.value})}},r.a.createElement("option",null,"none"),r.a.createElement("option",null,"Calorie Restrict"),r.a.createElement("option",null,"Paleo"),r.a.createElement("option",null,"Keto"),r.a.createElement("option",null,"Mediterranian"),r.a.createElement("option",null,"Vegetarian"),r.a.createElement("option",null,"Vegan"),r.a.createElement("option",null,"Carnivore"),r.a.createElement("option",null,"Low Carb"),r.a.createElement("option",null,"Low Fat"),r.a.createElement("option",null,"PSMF"),r.a.createElement("option",null,"Specific/Personal Plan")),r.a.createElement("div",{className:"profileButtons"},r.a.createElement("input",{className:"ftButton",disabled:p,type:"submit",value:"Save Changes"}),r.a.createElement("input",{className:"ftButton",disabled:p,type:"reset",value:"Cancel"})))),r.a.createElement("form",{className:"userform subblock boxShow",onSubmit:n.onChangePassword},r.a.createElement("h1",{className:"lineDown"},"Change Password"),r.a.createElement("div",{className:"fields"},r.a.createElement("span",null,"Current Password:"),r.a.createElement("input",{minLength:"8",name:"passnow",type:"password",onChange:function(e){return n.setState({passNow:e.currentTarget.value})}}),r.a.createElement("span",null,"New Password: "),r.a.createElement("input",{minLength:"8",name:"passnew",type:"password",onChange:function(e){return n.setState({passNew:e.currentTarget.value})}}),r.a.createElement("span",{className:"warning".concat("passNew"===m?"":" hidden")},"Invalid Password!"),r.a.createElement("span",{className:"detail"},"Password must be at least 8characters long and have both numbers and letters!"),r.a.createElement("span",null,"Confirm New Password:"),r.a.createElement("input",{minLength:"8",name:"passConfirm",type:"password",onChange:function(e){return n.setState({passConfirm:e.currentTarget.value})}}),r.a.createElement("span",{className:"warning".concat("passConfirm"===m?"":" hidden")},"Passwords do Not Match!"),r.a.createElement("div",{className:"profileButtons"},r.a.createElement("input",{className:"ftButton",disabled:p,type:"submit",value:"Save Changes"}),r.a.createElement("input",{className:"ftButton",disabled:p,type:"reset",value:"Cancel"})))))},n.onChangeProfile=function(e){e.preventDefault(),n.setState({isLoading:!0}),Object(N.a)(S.a.mark((function e(){var t,a,r,o,s,l,c,i,u,d,p,f,h,E;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.state,a=t.username,r=t.email,o=t.firstname,s=t.lastname,l=t.dob,c=t.sex,i=t.describe,u=t.pic,d=t.diet,p=n.context,f=p.updateUser,h=p.currentUser,!(""!==l&&new Date(l)>new Date)){e.next=6;break}n.setState({warning:"dob"}),e.next=13;break;case 6:return e.next=8,fetch("".concat(m(),"/profile"),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({userid:h.userid,username:a,email:r,firstname:""===o?null:o,lastname:""===s?null:s,dob:""===l?null:l,sex:""===c?null:c,describe:""===i?null:i,pic:""===u?null:u,diet:d})});case 8:return E=e.sent,e.next=11,E.json();case 11:(E=e.sent).includes("Username")?n.setState({warning:"username"}):E.includes("Email")?n.setState({warning:"email"}):"User Profile Updated!"===E?f(n.state):console.log(E);case 13:n.setState({isLoading:!1});case 14:case"end":return e.stop()}}),e)})))()},n.onChangePassword=function(e){e.preventDefault();var t=n.state,a=t.passNow,r=t.passNew,o=t.passConfirm,s=n.context.currentUser;r.match(n.passRegex)?r!==o?n.setState({warning:"passConfirm"}):(e.preventDefault(),n.setState({isLoading:!0}),Object(N.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(m(),"/profile/changepass"),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({userid:s.userid,oldpass:a,newpass:r})});case 3:return t=e.sent,e.next=6,t.json();case 6:t=e.sent,console.log(t),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("___________ERROR___________\n",e.t0.message);case 13:return e.prev=13,n.setState({isLoading:!1}),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,10,13,16]])})))()):n.setState({warning:"passNew"})},n.cancelChangeProfile=function(e){e.preventDefault();var t=n.context.currentUser,a=t.username,r=t.email,o=t.firstname,s=t.lastname,l=t.dob,c=t.sex,i=t.pic,u=t.describe,d=t.diet;n.setState({username:a,email:r,firstname:o,lastname:s,dob:l,sex:c,describe:u,pic:i,diet:d})},n.browseUserPic=function(e){e.preventDefault(),alert("Sorry. Not implemented yet...")},n.state={passNow:"",passNew:"",passConfirm:"",warning:null,isLoading:!1},n}return a}(r.a.Component));W.contextType=f;var X=W,Z=function(e){Object(c.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).render=function(){var e=n.state,t=e.warningMsg,a=e.isLoading,o=n.context.changeMainPage;return r.a.createElement("main",{className:"mainUserForm boxShow"},r.a.createElement("form",{className:"userform subblock boxShow",onSubmit:n.onLogin},r.a.createElement("h1",{className:"lineDown"},"Enter Username/Email and Password to Login!"),r.a.createElement("div",{className:"fields"},r.a.createElement("span",null,"Username/Email:"),r.a.createElement("input",{name:"username",type:"text"}),r.a.createElement("span",null,"Password:"),r.a.createElement("input",{name:"password",type:"password"}),r.a.createElement("span",{disabled:a},"Remember Me?",r.a.createElement("input",{name:"member",type:"checkbox"})),r.a.createElement("span",{className:null===t?"hidden":"warning"},n.state.warningMsg),r.a.createElement("input",{className:"ftButton",disabled:a,type:"submit",value:"Login"})),r.a.createElement("div",{className:"loglinks"},r.a.createElement("span",{disabled:a,role:"link",onClick:function(){return o("Home")}},"Forgot Password?"),r.a.createElement("span",{disabled:a,role:"link",onClick:function(){return o("Register")}},"New here? Go Register!"))))},n.onLogin=function(e){e.preventDefault(),n.setState({isLoading:!0}),Object(N.a)(S.a.mark((function e(){var t,a,r,o,s,l,c,i;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.querySelectorAll(".userform input"),a=t[0].value,r=t[1].value,o=n.context,s=o.updateUser,l=o.changeMainPage,c=200,e.next=7,fetch("".concat(m(),"/login"),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a,pass:r})});case 7:if((i=e.sent).status!==c){e.next=15;break}return e.next=11,i.json();case 11:"string"===typeof(i=e.sent)?n.setState({warningMsg:i}):(s(i),l("Profile")),e.next=20;break;case 15:return e.t0=console,e.next=18,i.json();case 18:e.t1=e.sent,e.t0.log.call(e.t0,e.t1);case 20:n.setState({isLoading:!1});case 21:case"end":return e.stop()}}),e)})))()},n.state={warningMsg:null,isLoading:!1},n}return a}(r.a.Component);Z.contextType=f;var $=Z,Q=function(e){Object(c.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).passRegex=/^(?=.*?\d)(?=.*?[a-zA-Z]).+$/,n.render=function(){var e=n.state,t=e.sex,a=e.warning,o=e.isLoading;return r.a.createElement("main",{className:"mainUserForm boxShow"},r.a.createElement("form",{className:"userform subblock boxShow",onSubmit:n.onRegister},r.a.createElement("h1",{className:"lineDown"},"Please Complete Required fields to Register"),r.a.createElement("div",{className:"fields"},r.a.createElement("span",{className:"req"},"Username*:"),r.a.createElement("input",{name:"username",pattern:".{3,}",required:!0,title:"3 characters minimum",type:"text",onChange:function(e){return n.setState({username:e.currentTarget.value})}}),r.a.createElement("span",{className:"warning".concat("username"===a?"":" hidden")},"Username is Already Taken!"),r.a.createElement("span",{className:"req"},"Email*:"),r.a.createElement("input",{name:"email",type:"email",onChange:function(e){return n.setState({email:e.currentTarget.value})}}),r.a.createElement("span",{className:"warning".concat("email"===a?"":" hidden")},"Email is Already Taken!"),r.a.createElement("span",{className:"req"},"Password*:"),r.a.createElement("input",{className:"pass",minLength:"8",name:"password",type:"password",onChange:function(e){return n.setState({pass:e.currentTarget.value})}}),r.a.createElement("span",{className:"warning".concat("pass"===a?"":" hidden")},"Invalid Password!"),r.a.createElement("span",{className:"detail"},"Password must be at least 8characters long and have both numbers and letters!"),r.a.createElement("span",{className:"req"},"Confirm Password*:"),r.a.createElement("input",{minLength:"8",name:"cpass",type:"password",onChange:function(e){return n.setState({passC:e.currentTarget.value})}}),r.a.createElement("span",{className:"warning".concat("passC"===a?"":" hidden")},"Passwords do Not Match!"),r.a.createElement("span",null,"First Name:"),r.a.createElement("input",{name:"firstname",type:"text",onChange:function(e){return n.setState({firstname:e.currentTarget.value})}}),r.a.createElement("span",null,"Last Name:"),r.a.createElement("input",{name:"lastname",type:"text",onChange:function(e){return n.setState({lastname:e.currentTarget.value})}}),r.a.createElement("span",null,"Date Of Birth:"),r.a.createElement("input",{name:"dob",type:"date",onChange:function(e){return n.setState({dob:e.currentTarget.value})}}),r.a.createElement("span",{className:"warning".concat("dob"===a?"":" hidden")},"Incorrect date!"),r.a.createElement("div",null,r.a.createElement("span",null,"Sex:"),r.a.createElement("input",{checked:"1"===t,name:"sex",type:"radio",value:"male",onChange:function(e){return n.setState({sex:"1"})}}),r.a.createElement("span",null,"Male "),r.a.createElement("input",{checked:"0"===t,name:"sex",type:"radio",value:"female",onChange:function(e){return n.setState({sex:"0"})}}),r.a.createElement("span",null,"Female")),r.a.createElement("div",{className:"personal"},r.a.createElement("div",null,r.a.createElement("img",{alt:"[NO PIC]",src:"UserPics/profileEmpty.png"}),r.a.createElement("br",null),r.a.createElement("button",{className:"ftButton",disabled:o,onClick:n.browseUserPic},"Browse")),r.a.createElement("div",null,r.a.createElement("span",null,"Short Description:"),r.a.createElement("br",null),r.a.createElement("textarea",{placeholder:"Say who you are in a few short phrases..",onChange:function(e){return n.setState({describe:e.currentTarget.value})}}))),r.a.createElement("span",null,"Diet Plans?"),r.a.createElement("select",{onChange:function(e){return n.setState({diet:"none"===e.currentTarget.value?null:e.currentTarget.value})}},r.a.createElement("option",null,"none"),r.a.createElement("option",null,"Calorie Restrict"),r.a.createElement("option",null,"Paleo"),r.a.createElement("option",null,"Keto"),r.a.createElement("option",null,"Mediterranian"),r.a.createElement("option",null,"Vegetarian"),r.a.createElement("option",null,"Vegan"),r.a.createElement("option",null,"Carnivore"),r.a.createElement("option",null,"Low Carb"),r.a.createElement("option",null,"Low Fat"),r.a.createElement("option",null,"PSMF"),r.a.createElement("option",null,"Specific Personal Plan")),r.a.createElement("span",{className:"detail"},"-Pick a Diet from list if any of them apply to You - Can always change it later!"),r.a.createElement("span",{className:"detail"},"(This Choice is simply for tracking stats - Will Not affect results &recommendations)"),r.a.createElement("input",{className:"ftButton",disabled:o,type:"submit",value:"Register"}))))},n.onRegister=function(e){e.preventDefault(),n.setState({isLoading:!0}),Object(N.a)(S.a.mark((function e(){var t,a,r,o,s,l,c,i,u,d,p,f,h,E;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=n.state,a=t.pass,r=t.passC,o=t.username,s=t.email,l=t.firstname,c=t.lastname,i=t.dob,u=t.sex,d=t.describe,p=t.pic,f=t.diet,h=n.context.changeMainPage,a.match(n.passRegex)){e.next=7;break}n.setState({warning:"pass"}),e.next=22;break;case 7:if(a===r){e.next=11;break}n.setState({warning:"passC"}),e.next=22;break;case 11:if(!(""!==i&&new Date(i)>new Date)){e.next=15;break}n.setState({warning:"dob"}),e.next=22;break;case 15:return e.next=17,fetch("".concat(m(),"/register"),{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:o,email:s,firstname:""===l?null:l,lastname:""===c?null:c,dob:""===i?null:i,sex:""===u?null:u,describe:""===d?null:d,pic:""===p?null:p,diet:"none"===f?null:f,pass:a})});case 17:return E=e.sent,e.next=20,E.json();case 20:(E=e.sent).userid?h("Login"):E.includes("Username")?n.setState({warning:"username"}):E.includes("Email")?n.setState({warning:"email"}):console.log(E);case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(0),console.log("___________ERROR___________\n",e.t0.message);case 27:return e.prev=27,n.setState({isLoading:!1}),e.finish(27);case 30:case"end":return e.stop()}}),e,null,[[0,24,27,30]])})))()},n.browseUserPic=function(e){e.preventDefault(),alert("Sorry. Not implemented yet...")},n.state={username:null,email:null,pass:null,passC:null,firstname:null,lastname:null,dob:null,sex:null,pic:null,desc:null,diet:null,warning:null,isLoading:!1},n}return a}(r.a.Component);Q.contextType=f;var ee=Q,te=function(){return r.a.createElement("main",{className:"boxShow"},r.a.createElement("div",{className:"subblock"},r.a.createElement("h1",null,"Error! Page does not exist!")))},ae=function(e){Object(c.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).render=function(){switch(n.state.page){case"Home":return r.a.createElement(b,null);case"DailyMeals":return r.a.createElement(z,null);case"YourFood":return r.a.createElement(B,null);case"YourPlans":return r.a.createElement(Y,null);case"YourStats":return r.a.createElement(q,null);case"GlobalStats":return r.a.createElement(J,null);case"GlobalData":return r.a.createElement(K,null);case"Profile":return r.a.createElement(X,null);case"Register":return r.a.createElement(ee,null);case"Login":return r.a.createElement($,null);default:return r.a.createElement(te,null)}},n.changePage=function(e){n.state.page!==e&&n.setState({page:e})},n.state={page:e.page?e.page:"Home"},n}return a}(r.a.Component),ne=function(e){Object(c.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).render=function(){return r.a.createElement("footer",{className:"subblock boxShow"},r.a.createElement("h3",{id:"author"},"--Made by Rotariu Stefan",r.a.createElement("sub",null," - StravoS")))},e}return a}(r.a.Component),re={main:r.a.createRef(),footer:r.a.createRef(),header:r.a.createRef(),nav:r.a.createRef()},oe=function(e){Object(c.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).render=function(){return r.a.createElement(f.Provider,{value:{currentUser:n.state.currentUser,changeMainPage:n.changeMainPage,updateUser:n.updateUser}},r.a.createElement("div",{className:"layout"},r.a.createElement(E,{key:"H",ref:re.header}),r.a.createElement(y,{key:"N",ref:re.nav}),r.a.createElement(ae,{key:"M",ref:re.main,page:"Home"}),r.a.createElement(ne,{key:"F",ref:re.footer})))},n.changeMainPage=function(e){return re.main.current.changePage(e)},n.updateUser=function(e){null===e?(n.setState({currentUser:p}),re.header.current.updateUser(!1)):(e.dob=d(new Date(e.dob)),n.setState({currentUser:e}),re.header.current.updateUser(!0))},n.updateUserProfile=function(e){var t=n.state.currentUser;t.username=e.username,t.email=e.email,t.firstname=e.firstname,t.lastname=e.lastname,t.dob=e.dob,t.sex=e.sex,t.describe=e.describe,t.pic=e.pic,t.diet=e.diet,n.setState({currentUser:t})},n.state={currentUser:p},n}return a}(r.a.Component);s.a.render(r.a.createElement(oe,null),document.querySelector("#root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.cde9ca7d.chunk.js.map