(this.webpackJsonpftsite=this.webpackJsonpftsite||[]).push([[0],{12:function(e){e.exports=JSON.parse('{"serverLink":"https://tranquil-citadel-37714.herokuapp.com"}')},13:function(e,t,a){e.exports=a(20)},19:function(e,t,a){},20:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(11),s=a.n(o),l=a(2),c=a(6),i=a(4),u=a(3),d=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).updateUser=function(e,t,a){n.setState({isLogged:e,username:t,pic:a})},n.onLogClick=function(){n.state.isLogged?(G.updateUser(null),G.changeMainPage("Home")):G.changeMainPage("Login")},n.render=function(){var e=n.state,t=e.isLogged,a=e.username,o=e.pic;return r.a.createElement("header",{className:"subblock boxShow"},r.a.createElement("img",{src:"SitePics/head.png",alt:"[NO LOGO]",className:"logo"}),r.a.createElement("div",{onClick:function(){return G.changeMainPage("Home")},id:"titleArea"},r.a.createElement("h1",{id:"title"},"FoodTracker"),r.a.createElement("h3",{id:"subtitle"},"Define and Track your Food and diet goals on Your own terms!")),r.a.createElement("div",{id:"profileArea",className:"boxShow"},r.a.createElement("span",{onClick:function(){return G.changeMainPage(t?"Profile":"Register")}},a,r.a.createElement("br",null),r.a.createElement("img",{src:"UserPics/".concat(o||"profileEmpty.png"),alt:"[NO PIC]"})),r.a.createElement("span",{onClick:function(){return G.changeMainPage(t?"Profile":"Register")},className:"navlink"},t?"Profile":"Register"),r.a.createElement("span",{onClick:n.onLogClick,className:"navlink"},t?"Logout":"Login")))},n.state={isLogged:!1,username:G.defaultUser.username,pic:G.defaultUser.pic},n}return a}(r.a.Component),m=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).render=function(){return r.a.createElement("nav",{className:"subblock boxShow"},r.a.createElement("span",{onClick:function(){return G.changeMainPage("DailyMeals")},className:"navlink textHigh"},"Daily Meals"),"|",r.a.createElement("span",{onClick:function(){return G.changeMainPage("YourFood")},className:"navlink textHigh"},"Your Food"),"|",r.a.createElement("span",{onClick:function(){return G.changeMainPage("YourPlans")},className:"navlink textHigh"},"Your Plans"),"|",r.a.createElement("span",{onClick:function(){return G.changeMainPage("YourStats")},className:"navlink textHigh"},"Your Stats"),"|",r.a.createElement("span",{onClick:function(){return G.changeMainPage("GlobalStats")},className:"navlink textHigh"},"Global Stats"),"|",r.a.createElement("span",{onClick:function(){return G.changeMainPage("GlobalData")},className:"navlink textHigh"},"Users Data"))},e}return a}(r.a.Component),p=function(){return r.a.createElement("main",{className:"boxShow"},r.a.createElement("div",{className:"subblock"},r.a.createElement("h1",null,"WELCOME !"),r.a.createElement("p",null,"This is a website where you can track what you eat. You can Design ,Customize and Organize foods, meals and diet plans to your liking, and also track various self defined goals with a high degree of customisability and have easy access to helpful information."),r.a.createElement("p",null,r.a.createElement("br",null),"While preselecting foods through scanning codes and importing lists from various places will be available in the future, the Main Functionality of this site revolves around providing a a simple practical and flexible framework where YOU Define and Organize your stuff and can potentially completely ignore anything else."),r.a.createElement("p",null,r.a.createElement("br",null),"This has been entirely made from scratch by me (o/ hi!) mostly because other similar websites seem to want to box you into a way of doing things and predefine certain goals for you while also expecting you to pick from many predefined items. I found this rather confusing or restrictive and annoying. BUT here if you feel like making a user called Worm69 that eats 2grams of Dirt and Fungus 30 times a day you can do that!(please don't tho..)"),r.a.createElement("br",null),r.a.createElement("p",null,r.a.createElement("span",null,"As a Guest you have Certain Limitations:")," You can only log food in a specific time period and also have limits on how many entries you can asign to your daily meals. The Guest is only here to quick demonstrations on how this site functions and the data you enter is NOT Realiable/Persistent for long terms. (also as this site is currently running for free and will receive major changes-including the database- The Data you put in might get wiped/changed in the future)."),r.a.createElement("p",null,r.a.createElement("br",null),"This site is in constant development and tends to get frequent (often daily) updates. Right now you can make an account, change profile details, and in DailyMeals section you can add/change Meals to days you select, and add Food Items to Meals. You can do this either by searching through a list of Foods(right now comprises of what I've eaten lately) or create your own foods. Right now you can only add simple foods with a name and brand, macronutrients and size/portion information. More will come.",r.a.createElement("br",null)),r.a.createElement("p",null,r.a.createElement("br",null),"But you can attach notes to days and meals. Notes consist of a score, a title and text. You use this system to write how you felt about a meal, keep track of alergies/odd reactions/blood sugar or really anything you want. You can find a list of my notes but they probably won't help much because it's personal to me. The list will change to something more general/better later on.")))},f=a(1),h=a.n(f),g=a(7),E=a(5),y=(a(19),a(8)),b=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n,o;return Object(l.a)(this,a),(n=t.call(this,e)).getMacroRes=function(e){var t=n.state.foodEntry,a=t.amount,r=t.measure,o=t.sizeinfo;return"Pieces"===r?null===o?(n.state.foodEntry[e]*a).toFixed(1):(n.state.foodEntry[e]*a*o/100).toFixed(1):"Grams"===r?(n.state.foodEntry[e]*a/100).toFixed(1):void 0},n.render=function(){var e=n.state,t=e.foodEntry,a=e.fatRes,o=e.carbsRes,s=e.proteinRes,l=t.foodname,i=t.brand,u=t.amount,d=t.fat,m=t.carbs,p=t.protein;return r.a.createElement("div",{className:"foodEntry "+n.props.className},r.a.createElement("span",{className:"amount"},u),r.a.createElement("span",{className:"name_brand"},"".concat(l," ").concat(i?"@"+i:"")),r.a.createElement("span",{className:"macro"},"".concat(d,"/").concat(m,"/").concat(p)),r.a.createElement("span",{className:"macroRes"},"".concat(a,"/").concat(o,"/").concat(s),n.props.readOnly?"":r.a.createElement("img",{className:"managerImg",src:"SitePics/icons8-closeM-window-16.png",alt:"X",onClick:function(e){return n.props.removeFoodEntry(e,Object(c.a)(n))}})))},n.componentDidMount=function(){var e=n.state,t=e.fatRes,a=e.carbsRes,r=e.proteinRes;n.props.addToMeal&&n.props.addToMeal(t,a,r)},e.foodEntry?o=e.foodEntry:e.foodItem?((o=e.foodItem).amount=e.amount,o.measure=e.measure):o=Object(y.a)({},a.defaultFoodEntry),n.state={foodEntry:o},n.state.fatRes=n.getMacroRes("fat"),n.state.carbsRes=n.getMacroRes("carbs"),n.state.proteinRes=n.getMacroRes("protein"),n}return a}(r.a.Component);b.defaultFoodEntry={foodid:0,foodname:"Nothing",brand:"Nobody",fat:0,carbs:0,protein:0,sizeinfo:null,userid:0,pic:null,price:0,isdish:!1,note:null,amount:1,measure:"Pieces"};var v=b,S=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).toggleSelected=function(){return n.setState({isSelected:!n.state.isSelected})},n.render=function(){var e=n.state,t=e.isSelected,a=e.note,o=a.score,s=a.title,l=a.notetext;return r.a.createElement("div",{onClick:function(e){return n.props.selectedChanged(e,Object(c.a)(n))},className:"noteView boxShow lineDown"+(t?" nSelected":"")},r.a.createElement("img",{src:"SitePics/star".concat(o,".png"),alt:"S="+o,className:"scoreImg"}),r.a.createElement("span",{className:"title"},s),r.a.createElement("span",null,"--"+(l||"<Empty>")))},n.componentDidMount=function(){n.props.signalSelect&&n.props.selectedChanged(null,Object(c.a)(n))},n.state={note:e.note,isSelected:!1},n}return a}(r.a.Component),w=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(l.a)(this,a),(n=t.call(this,e)).onEditAddNote=function(e){e?n.setState({isEdit:!0,isEditValues:!0}):(n.setState({isEdit:!0,isEditValues:!1}),n.loadNoteViews(""))},n.loadNoteViews=function(e){n.setState({noteViews:[],noteViewsIsLoading:!0,searchCounter:n.state.searchCounter+1});var t=n.state.searchCounter+1;setTimeout((function(){return n.searchNoteViews(e,t)}),150)},n.searchNoteViews=function(){var e=Object(E.a)(h.a.mark((function e(t,a){var o,s,l,c,i,u,d,m;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a<n.state.searchCounter)){e.next=2;break}return e.abrupt("return");case 2:return o=n.state.noteViewCounter,s=0===G.state.currentUser.userid?1:G.state.currentUser.userid,e.next=6,fetch(G.getServerURL()+"/dailymeals/notesearch",{method:"get",headers:{"content-type":"application/json",userid:s,search:t}});case 6:return l=e.sent,e.next=9,l.json();case 9:if(l=e.sent,!(a<n.state.searchCounter)){e.next=12;break}return e.abrupt("return");case 12:c=[],i=!0,u=Object(g.a)(l);try{for(u.s();!(d=u.n()).done;)m=d.value,i?(c.push(r.a.createElement(S,{note:m,signalSelect:!0,selectedChanged:n.onSelectedNoteViewChanged,key:o++})),i=!1):c.push(r.a.createElement(S,{note:m,selectedChanged:n.onSelectedNoteViewChanged,key:o++}))}catch(p){u.e(p)}finally{u.f()}n.setState({noteViews:c,noteViewCounter:o,noteViewsIsLoading:!1});case 17:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.onSelectedNoteViewChanged=function(e,t){var a=n.state.selectedNoteView;t!==a&&(a&&a.toggleSelected(),t.toggleSelected(),n.setState({selectedNoteView:t}))},n.setNote=function(){var e=n.state,t=e.isEditValues,a=e.newScore,r=e.newTitle,o=e.newText;t?(n.props.updateAttach({score:a,title:""===r?"Untitled":r,notetext:o}),n.setState({note:{score:a,title:""===r?"Untitled":r,notetext:o},isEdit:!1})):(n.props.updateAttach(n.state.selectedNoteView.state.note),n.setState({note:n.state.selectedNoteView.state.note,isEdit:!1}))},n.render=function(){var e=n.state,t=e.isEdit,a=e.isEditValues,o=e.note,s=e.noteViews,l=e.noteViewsIsLoading,c=e.newScore;if(n.props.isMin)return r.a.createElement("hr",null);if(t)return r.a.createElement("div",{className:"noteEdit boxShow"},r.a.createElement("div",{className:"editChoices"},r.a.createElement("input",{onChange:function(e){return n.onEditAddNote(!1)},type:"radio",name:n._reactInternalFiber.key+"_radio",value:"select",checked:!a}),"Select",r.a.createElement("input",{onChange:function(e){return n.onEditAddNote(!0)},type:"radio",name:n._reactInternalFiber.key+"_radio",value:"values",checked:a}),"Values",r.a.createElement("button",{onClick:function(){n.setState({isEdit:!1})}},"Cancel")),a?r.a.createElement("div",{className:"newNote"},r.a.createElement("span",null,"Score:"),r.a.createElement("div",null,r.a.createElement("select",{onChange:function(e){return n.setState({newScore:e.currentTarget.value})},defaultValue:0},n.options),r.a.createElement("img",{src:"SitePics/star".concat(c,".png"),alt:"S="+c,className:"scoreImg"}),r.a.createElement("button",{onClick:n.setNote},"Apply New Note")),r.a.createElement("span",null,"Title:"),r.a.createElement("input",{onChange:function(e){return n.setState({newTitle:e.currentTarget.value})},type:"text",maxLength:"50"}),r.a.createElement("span",null,"Text:"),r.a.createElement("textarea",{onChange:function(e){return n.setState({newText:e.currentTarget.value})},maxLength:"250"})):r.a.createElement("div",{className:"selectNote"},r.a.createElement("div",{className:"noteSearch"},"Search:",r.a.createElement("input",{onChange:function(e){return n.loadNoteViews(e.currentTarget.value)},type:"text",maxLength:"100"}),r.a.createElement("button",{onClick:n.setNote},"Select Note")),r.a.createElement("div",{className:"noteSearchArea"},l?"LOADING...":s)));if(o){var i=o.score,u=o.title,d=o.notetext;return r.a.createElement("div",{className:"note boxShow"},r.a.createElement("img",{src:"SitePics/star".concat(i,".png"),alt:"S="+i,className:"scoreImg"}),r.a.createElement("img",{onClick:n.props.removeNote,src:"SitePics/icons8-close-window-16.png",alt:"X",className:"managerImg"}),r.a.createElement("img",{onClick:function(){return n.onEditAddNote(!0)},src:"SitePics/icons8-edit-16.png",alt:"New",className:"managerImg"}),r.a.createElement("span",{className:"title"},u),r.a.createElement("span",{className:"notetext"},d?"--"+d:""))}return r.a.createElement("div",{className:"note boxShow"},"No Note",r.a.createElement("img",{className:"managerImg",src:"SitePics/icons8-plus-16.png",alt:"N",onClick:n.onEditAddNote}))},n.state={note:e.note,isEdit:!1,isEditValues:!1,selectedNoteView:null,noteViews:[],noteViewsIsLoading:!0,noteViewCounter:0,searchCounter:0,newScore:0,newTitle:"",newText:""},n.options=[];for(var o=-5;o<=5;o++)n.options.push(r.a.createElement("option",{key:o},o));return n}return a}(r.a.Component),N=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;if(Object(l.a)(this,a),(n=t.call(this,e)).addNewFoodEntry=function(e,t){var a=n.state.foodEntries,o=n.state.foodCounter;a.push(r.a.createElement(v,{foodEntry:t,removeFoodEntry:n.onRemoveFoodEntry,addToMeal:n.addNewFoodEntryMacros,key:o++,className:"lineDown"})),n.setState({foodEntries:a,foodCounter:o})},n.onRemoveFoodEntry=function(e,t){for(var a=n.state,r=a.foodEntries,o=a.mealEntry,s=a.fat,l=a.carbs,i=a.protein,u=o.portion,d=0;d<r.length;d++)r[d].key.toString()===t._reactInternalFiber.key&&(o.foodentries.splice(d,1),r.splice(d,1),n.setState({foodEntries:r,mealEntry:o,fat:s-t.state.fatRes*u,carbs:l-t.state.carbsRes*u,protein:i-t.state.proteinRes*u}),n.props.addToDay(0-t.state.fatRes*u,0-t.state.carbsRes*u,0-t.state.proteinRes*u));n.props.updateDayMF(Object(c.a)(n))},n.toggleHighlight=function(){return n.setState({isHighlighted:!n.state.isHighlighted})},n.toggleMinMax=function(e){n.setState({isMin:!n.state.isMin}),e.stopPropagation()},n.onUpdateAttach=function(e){var t=n.state.mealEntry;t.note=e,n.setState({mealEntry:t})},n.onRemoveNote=function(){var e=n.state.mealEntry;e.note=null,n.setState({mealEntry:e}),n.props.updateDay()},n.addNewFoodEntryMacros=function(e,t,a){var r=n.state.mealEntry.portion;n.state.fat+=e*r,n.state.carbs+=t*r,n.state.protein+=a*r,n.setState({}),n.props.addToDay(e*r,t*r,a*r)},n.render=function(){var e=n.state,t=e.mealEntry,a=e.isHighlighted,o=e.isMin,s=e.foodEntries,l=e.fat,i=e.carbs,u=e.protein,d=t.mealname,m=t.note,p=t.portion;return r.a.createElement("div",{onClick:function(e){return n.props.selectedChanged(e,Object(c.a)(n))},className:"mealArea boxShow"+(a?" highlight":"")},r.a.createElement("div",{className:"mealTitle"},"".concat(d," (x").concat(p,")"),r.a.createElement("img",{onClick:function(e){return n.props.removeMeal(e,Object(c.a)(n))},src:"SitePics/icons8-cancel-20.png",alt:"X",className:"managerImg"}),r.a.createElement("img",{onClick:n.toggleMinMax,src:o?"SitePics/icons8-plus-20.png":"SitePics/icons8-minus-20.png",alt:o?"+":"-",className:"managerImg"})),r.a.createElement(w,{removeNote:n.onRemoveNote,updateAttach:n.onUpdateAttach,note:m,key:n._reactInternalFiber.key+(m?"_note":"0"),isMin:o}),r.a.createElement("div",{className:"foodEntries lineDown"+(o?" hidden":"")},s),r.a.createElement("div",{className:"mealTotal"},r.a.createElement("span",null,"Meal Total:"),r.a.createElement("span",null,"".concat(l.toFixed(1),"|").concat(i.toFixed(1),"|").concat(u.toFixed(1)))))},n.componentDidMount=function(){n.props.signalSelect?n.props.selectedChanged(null,Object(c.a)(n)):n.setState({})},n.state={mealEntry:e.mealEntry?e.mealEntry:Object(y.a)({},a.defaultMealEntry),foodEntries:[],foodCounter:0,isHighlighted:!1,isMin:!1,fat:0,carbs:0,protein:0},e.mealEntry){var o,s=Object(g.a)(e.mealEntry.foodentries);try{for(s.s();!(o=s.n()).done;){var i=o.value;n.state.foodEntries.push(r.a.createElement(v,{foodEntry:i,removeFoodEntry:n.onRemoveFoodEntry,className:"lineDown",addToMeal:n.addNewFoodEntryMacros,key:n.state.foodCounter})),n.state.foodCounter++}}catch(u){s.e(u)}finally{s.f()}}return n}return a}(r.a.Component);N.defaultMealEntry={mealname:"New Meal",portion:1,note:null,foodentries:[]};var C=N,x=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).toggleSelected=function(){return n.setState({isSelected:!n.state.isSelected})},n.render=function(){var e=n.state,t=e.foodItem,a=e.isSelected,o=t.foodname,s=t.brand,l=t.fat,i=t.carbs,u=t.protein,d=t.sizeinfo;return r.a.createElement("div",{onClick:function(e){return n.props.selectedChanged(e,Object(c.a)(n))},className:"foodItem lineDown"+(a?" feSelected":"")},r.a.createElement("span",{className:"name_brand"},"".concat(o," ").concat(s?"@"+s:"")),r.a.createElement("span",{className:"macro"},"".concat(l,"/").concat(i,"/").concat(u)),r.a.createElement("span",{className:"per"},null===d?"1":"100g"))},n.componentDidMount=function(){n.props.signalSelect&&n.props.selectedChanged(null,Object(c.a)(n))},n.state={foodItem:e.foodItem?e.foodItem:Object(y.a)({},a.defaultFoodItem),isSelected:!1},n}return a}(r.a.Component);x.defaultFoodItem={foodid:0,foodname:"Nothing",brand:"Nowhere",fat:0,carbs:0,protein:0,sizeinfo:null,userid:0,pic:"empty.png",price:0,isdish:!1,note:null};var k=x,F=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).loadDailyMeals=function(e){"Guest"===G.state.currentUser.access&&(new Date(e)<new Date("2020-06-04")||new Date(e)>new Date("2020-06-11"))?alert("As Guest user you can Only select from the 2020-06-04 to 2020-06-11 period!"):(n.setState({mealEntries:[],selectedMeal:null,mealareaIsLoading:!0,dayFat:0,dayCarbs:0,dayProtein:0}),Object(E.a)(h.a.mark((function t(){var a,o,s,l,c,i,u;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.state.mealCounter,t.next=3,fetch(G.getServerURL()+"/dailymeals",{method:"get",headers:{"content-type":"application/json",reqdate:e,userid:G.state.currentUser.userid}});case 3:return o=t.sent,t.next=6,o.json();case 6:o=t.sent,s=[],l=!0,c=Object(g.a)(o.meals);try{for(c.s();!(i=c.n()).done;)u=i.value,l?(s.push(r.a.createElement(C,{signalSelect:!0,addToDay:n.addNewFoodEntryMacros,selectedChanged:n.onSelectedMealChanged,updateDayMF:n.onUpdateDay,removeMeal:n.onRemoveMeal,mealEntry:u,updateDay:n.updateSelectedMealNote,key:a++})),l=!1):s.push(r.a.createElement(C,{addToDay:n.addNewFoodEntryMacros,selectedChanged:n.onSelectedMealChanged,updateDayMF:n.onUpdateDay,removeMeal:n.onRemoveMeal,mealEntry:u,updateDay:n.updateSelectedMealNote,key:a++}))}catch(d){c.e(d)}finally{c.f()}n.setState({selectedDay:e,dayEntry:o,mealEntries:s,mealCounter:a,mealareaIsLoading:!1});case 12:case"end":return t.stop()}}),t)})))())},n.loadSFoodItems=function(e,t){n.setState({sFoodItems:[],searchareaIsLoading:!0,searchCounter:n.state.searchCounter+1});var a=n.state.searchCounter+1;setTimeout(Object(E.a)(h.a.mark((function o(){var s,l,c,i,u,d,m,p,f=arguments;return h.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(!((s=f.length>0&&void 0!==f[0]?f[0]:a)<n.state.searchCounter)){o.next=3;break}return o.abrupt("return");case 3:return l=n.state.sFoodCounter,o.next=6,fetch(G.getServerURL()+"/dailymeals/foodsearch",{method:"get",headers:{"content-type":"application/json",userid:G.state.currentUser.userid,search:e,isall:t}});case 6:return c=o.sent,o.next=9,c.json();case 9:if(c=o.sent,!(s<n.state.searchCounter)){o.next=12;break}return o.abrupt("return");case 12:i=[],u=!0,d=Object(g.a)(c);try{for(d.s();!(m=d.n()).done;)p=m.value,u?(i.push(r.a.createElement(k,{signalSelect:!0,selectedChanged:n.onSelectedFoodChanged,foodItem:p,key:l++})),u=!1):i.push(r.a.createElement(k,{selectedChanged:n.onSelectedFoodChanged,foodItem:p,key:l++}))}catch(h){d.e(h)}finally{d.f()}n.setState({selectedFood:u?null:n.state.selectedFood,measure:u?"---":n.state.measure,sFoodItems:i,sFoodCounter:l,searchareaIsLoading:!1});case 17:case"end":return o.stop()}}),o)}))),150)},n.onCommit=function(e){n.setState({searchareaIsLoading:!0}),function(){var e=Object(E.a)(h.a.mark((function e(t){var a,r,o,s,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.state,r=a.dayEntry,o=a.selectedDay,(s=r).userid=G.state.currentUser.userid,s.date=o,e.next=6,fetch(G.getServerURL()+"/dailymeals",{method:"put",headers:{"content-type":"application/json"},body:JSON.stringify(s)});case 6:return l=e.sent,e.next=9,l.json();case 9:l=e.sent,n.loadDailyMeals(n.state.selectedDay),"string"!==typeof l?alert("Successfully entered date for day ".concat(o,"!\n --You can view resulting entry in the console")):alert("There was an Error!"),console.log(l);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(),n.setState({searchareaIsLoading:!1})},n.onAddNewMeal=function(e){if("Guest"!==G.state.currentUser.access||5!==n.state.mealEntries.length){var t=n.state,a=t.mealEntries,o=t.dayEntry,s=t.newFoodForm,l=n.state.mealCounter,c=document.querySelector(".newMPortion");if(isNaN(c.value))return alert("Must Enter Valid Number for Portion!"),void(c.value="");var i=document.querySelector(".newMName"),u={mealname:""===i.value?i.placeholder:i.value,portion:""===c.value?c.placeholder:c.value,noteid:null,foodentries:[]};a.push(r.a.createElement(C,{signalSelect:!0,mealEntry:u,addToDay:n.addNewFoodEntryMacros,selectedChanged:n.onSelectedMealChanged,removeMeal:n.onRemoveMeal,updateDayMF:n.onUpdateDay,updateDay:n.updateSelectedMealNote,key:l})),u.key=l,o.meals.push(u),i.value="",c.value="",n.setState({mealEntries:a,mealCounter:l+1,dayEntry:o}),s||document.querySelector("#search").select()}else alert("As Guest user you cannot enter more than 5 Meals per day!")},n.onRemoveMeal=function(e,t){var a=n.state,r=a.selectedMeal,o=a.mealEntries,s=a.dayEntry;s.meals=s.meals.filter((function(e){return!(e.mealid&&e.mealid===t.state.mealEntry.mealid||void 0!==e.key&&e.key.toString()===t._reactInternalFiber.key)})),n.setState({mealEntries:o.filter((function(e){return e.key!==t._reactInternalFiber.key})),dayEntry:s}),n.addNewFoodEntryMacros(-t.state.fat,-t.state.carbs,-t.state.protein),null!==r&&r===t&&n.setState({selectedMeal:null}),e.stopPropagation()},n.onUpdateDay=function(e){var t,a=n.state.dayEntry,r=Object(g.a)(a.meals);try{for(r.s();!(t=r.n()).done;){var o=t.value;if(o.mealid&&e.state.mealEntry.mealid===o.mealid||void 0!==o.key&&e._reactInternalFiber.key===o.key.toString()){o.foodentries=e.state.mealEntry.foodentries;break}}}catch(s){r.e(s)}finally{r.f()}n.setState({dayEntry:a})},n.onSelectedMealChanged=function(e,t){var a=n.state.selectedMeal;t!==a&&(a&&a.toggleHighlight(),t.toggleHighlight(),n.setState({selectedMeal:t,dishSelected:!1}))},n.addNewFoodEntryMacros=function(e,t,a){n.state.dayFat+=e,n.state.dayCarbs+=t,n.state.dayProtein+=a,n.setState({})},n.onRemoveNote=function(){var e=n.state.dayEntry;e.note=null,n.setState({dayEntry:e})},n.updateSelectedMealNote=function(){var e,t=n.state,a=t.dayEntry,r=t.selectedMeal,o=Object(g.a)(a.meals);try{for(o.s();!(e=o.n()).done;){var s=e.value;if(s.mealid&&r.state.mealEntry.mealid===s.mealid||void 0!==s.key&&r._reactInternalFiber.key===s.key.toString()){s.note=r.state.mealEntry.note;break}}}catch(l){o.e(l)}finally{o.f()}n.setState({dayEntry:a})},n.onAddNewFoodEntry=function(e){var t=n.state,a=t.selectedMeal,o=t.selectedFood,s=t.dayEntry,l=t.amount,c=t.measure,i=t.newFoodForm,u=t.newFoodItem,d=t.dishSelected,m=t.composition,p=t.selectedFoodDetails;if("Guest"===G.state.currentUser.access&&(a&&a.state.foodEntries.length>=7||d&&p.foodentries.length>=7))alert("As Guest user you cannot enter more than 7 Food Items per meal!");else if(null!==a||!1!==d){if(i){if(""===u.foodname)return void alert("New Food must have a Name !");var f=Number(u.fat)+Number(u.carbs)+Number(u.protein);if(isNaN(f)||"Grams"===c&&(f>100||f<=0))return void alert("Macro value are wrong!");if(isNaN(u.price))return void alert("Price value is wrong!");if(isNaN(u.sizeinfo)||u.sizeinfo<0)return void alert("Piece Size value is wrong!")}else if(null===o)return void alert("Must select a Food Item !");if(isNaN(l))return alert("Must Enter Valid Number for Amount!"),void n.setState({amount:""});var h=i?u:o.state.foodItem;if(h.amount=l||document.querySelector("#amountSize").placeholder,h.measure=c,d){var E=n.state.sFoodCounter;m.push(r.a.createElement(v,{foodEntry:h,removeFoodEntry:n.onRemoveFoodEntry,key:E++})),p.foodentries.push(h),n.setState({composition:m,selectedFoodDetails:p,sFoodCounter:E,newFoodForm:!1,newFoodItem:{foodname:"",brand:"",fat:0,carbs:0,protein:0,price:0,sizeinfo:100,isdish:!1,pic:"empty.png",userid:G.state.currentUser.userid,noteid:null,foodentries:null}})}else if(a){a.addNewFoodEntry(e,h);var y,b=Object(g.a)(s.meals);try{for(b.s();!(y=b.n()).done;){var S=y.value;if(S.mealid&&a.state.mealEntry.mealid===S.mealid||void 0!==S.key&&a._reactInternalFiber.key===S.key.toString()){S.foodentries.push(h);break}}}catch(w){b.e(w)}finally{b.f()}n.setState({dayEntry:s,newFoodForm:!1,newFoodItem:{foodname:"",brand:"",fat:0,carbs:0,protein:0,price:0,sizeinfo:100,isdish:!1,pic:"empty.png",userid:G.state.currentUser.userid,noteid:null}})}setTimeout((function(){return document.querySelector("#search").select()}),0)}else alert("Must select a Meal or Dish!")},n.onRemoveFoodEntry=function(e,t){for(var a=n.state,r=a.composition,o=a.selectedFoodDetails,s=0;s<r.length;s++)r[s].key.toString()===t._reactInternalFiber.key&&(o.foodentries.splice(s,1),r.splice(s,1),n.setState({composition:r,selectedFoodDetails:o}))},n.saveDishIngr=function(e){var t=n.state.selectedFoodDetails;n.setState({selectedFoodDetails:null,dishSelected:!1,searchareaIsLoading:!0}),Object(E.a)(h.a.mark((function e(){var a,r,o,s,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a={}).dishid=t.foodid,a.foodentries=[],r=Object(g.a)(t.foodentries);try{for(r.s();!(o=r.n()).done;)s=o.value,a.foodentries.push({foodid:s.foodid,amount:s.amount,measure:s.measure})}catch(c){r.e(c)}finally{r.f()}return e.next=7,fetch(G.getServerURL()+"/dailymeals/dishupdate",{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify(a)});case 7:return l=e.sent,e.next=10,l.json();case 10:l=e.sent,document.querySelector("#search").value=t.foodname+" "+t.brand,n.loadSFoodItems(t.foodname+" "+t.brand,document.querySelector("#isAll").checked),"string"!==typeof l?alert("Successfully saved dish: ".concat(t.foodname," ").concat(t.brand,"!\n --You can view resulting entry in the console")):alert("There was an Error!"),console.log(l);case 15:case"end":return e.stop()}}),e)})))()},n.calculateValues=function(e){n.setState({selectedFoodDetails:null,dishSelected:!1,searchareaIsLoading:!0}),Object(E.a)(h.a.mark((function e(){var t,a,r,o,s,l,c,i,u,d,m;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.state.selectedFoodDetails,a=0,r=0,o=0,s=Object(g.a)(t.foodentries);try{for(s.s();!(l=s.n()).done;)c=l.value,i=c.amount,u=c.measure,d=c.sizeinfo,"Pieces"===u?null===d?(a+=c.fat*i,r+=c.carbs*i,o+=c.protein*i):(a+=c.fat*i*d/100,r+=c.carbs*i*d/100,o+=c.protein*i*d/100):"Grams"===u&&(a+=c.fat*i/100,r+=c.carbs*i/100,o+=c.protein*i/100)}catch(p){s.e(p)}finally{s.f()}return t.fat=Number(a.toFixed(1)),t.carbs=Number(r.toFixed(1)),t.protein=Number(o.toFixed(1)),e.next=9,fetch(G.getServerURL()+"/yourfoods",{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify(t)});case 9:return m=e.sent,e.next=12,m.json();case 12:m=e.sent,document.querySelector("#search").value=t.foodname+" "+t.brand,n.loadSFoodItems(t.foodname+" "+t.brand,document.querySelector("#isAll").checked),"string"!==typeof m?alert("Successfully calculated values for dish: ".concat(t.foodname," ").concat(t.brand,"!\n --You can view resulting entry in the console")):alert("There was an Error!"),console.log(m);case 17:case"end":return e.stop()}}),e)})))()},n.onSelectedFoodChanged=function(e,t){var a=n.state,o=a.selectedFood,s=a.dishSelected;t!==o&&(o&&o.toggleSelected(),t.toggleSelected(),document.activeElement!==document.querySelector("#search")&&document.querySelector("#search").select(),n.setState({selectedFood:t,amount:"",measure:null===t.state.foodItem.sizeinfo?"Pieces":"Grams",selectedFoodDetails:s?n.state.selectedFoodDetails:null}),s||Object(E.a)(h.a.mark((function e(){var a,o,s,l,c,i,u,d,m,p,f;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.state,o=a.sFoodCounter,s=a.composition,l=t.state.foodItem,c=l.foodid,i=l.isdish,u=l.noteid,e.next=4,fetch(G.getServerURL()+"/dailymeals/fooddetails",{method:"get",headers:{"content-type":"application/json",foodid:c,isdish:i,noteid:u||null}});case 4:return d=e.sent,e.next=7,d.json();case 7:if(d=e.sent,s=[],d.foodentries){m=Object(g.a)(d.foodentries);try{for(m.s();!(p=m.n()).done;)f=p.value,s.push(r.a.createElement(v,{foodEntry:f,removeFoodEntry:n.onRemoveFoodEntry,key:o++}))}catch(h){m.e(h)}finally{m.f()}}n.setState({selectedFoodDetails:d,sFoodCounter:o,composition:s});case 11:case"end":return e.stop()}}),e)})))())},n.onDishSelect=function(e){var t=n.state,a=t.dishSelected,r=t.selectedMeal,o=t.selectedFood,s=t.selectedFoodDetails;if(!a&&o&&o.state.foodItem.isdish){var l=o.state.foodItem,c=l.foodname,i=l.brand,u=l.fat,d=l.carbs,m=l.protein,p=l.price,f=l.pic,h=(l.isdish,l.note),g=l.measure;s.foodname=c,s.brand=i,s.fat=u,s.carbs=d,s.protein=m,s.price=p,s.pic=f,s.measure=g,s.isdish=!0,s.note=h,r&&r.toggleHighlight(),n.setState({selectedMeal:null,dishSelected:!0})}},n.onUpdateAttach=function(e){var t=n.state.dayEntry;t.note=e,n.setState({dayEntry:t})},n.currentEntry=function(){var e=n.state,t=e.selectedFood,a=e.amount,o=e.measure,s=e.newFoodForm,l=e.newFoodItem;return s?(n.newFoodKey="mustchange"===n.newFoodKey?"willchange":"mustchange",r.a.createElement(v,{foodItem:l,amount:a,measure:o,key:n.newFoodKey,readOnly:"true"})):t?r.a.createElement(v,{foodItem:t.state.foodItem,amount:a||(t?"Pieces"===o?1:0===t.state.foodItem.sizeinfo?100:t.state.foodItem.sizeinfo:0),measure:o,key:t.state.foodItem.foodid.toString()+a+o,readOnly:"true"}):r.a.createElement(v,{key:"F0",readOnly:"true"})},n.changeNewFoodValue=function(e,t){var a=n.state.newFoodItem;if("per"===e){var r=document.querySelector(".PSInput");"1Piece"===t?(r.disabled=!0,r.value="",a.sizeinfo=null,n.setState({amount:1})):(document.querySelector(".PSInput").disabled=!1,r.value=100,a.sizeinfo=100,n.setState({amount:100}))}else"isdish"===e&&(a.foodentries=!0===t?[]:null),"sizeinfo"===e&&(t=""===t?null:t),"fat"!==e&&"carbs"!==e&&"protein"!==e||(t=""===t?0:t),a[e]=t;n.setState({newFoodItem:a,measure:null===a.sizeinfo?"Pieces":"Grams"})},n.onDayButtons=function(e,t){var a=n.state.selectedDay,r=new Date(a);r.setDate(r.getDate()+t),n.loadDailyMeals(G.dateToStr(r))},n.onSearchKey=function(e){var t=n.state,a=t.selectedFood,r=t.sFoodItems;switch(e.key){case"Enter":n.onAddNewFoodEntry(),e.preventDefault();break;case"Tab":document.querySelector("#amountSize").select(),e.preventDefault();break;case"Escape":document.querySelector("#search").value="",e.preventDefault();break;case"ArrowUp":if(a)for(var o=0;o<r.length;o++)if(r[o].key===a._reactInternalFiber.key){if(0===o)break;document.querySelectorAll(".foodItem")[o-1].click()}e.preventDefault();break;case"ArrowDown":if(a)for(var s=0;s<r.length;s++)if(r[s].key===a._reactInternalFiber.key){if(s===r.length-1)break;document.querySelectorAll(".foodItem")[s+1].click()}e.preventDefault()}},n.onAmountKey=function(e){switch(e.key){case"Enter":n.onAddNewFoodEntry(),e.preventDefault();break;case"Tab":document.querySelector("#search").select(),e.preventDefault();break;case"Escape":document.querySelector("#amountSize").value="",e.preventDefault();break;case"ArrowUp":case"ArrowDown":console.log(e.key),e.preventDefault()}},n.render=function(){var e=n.state,t=e.selectedDay,a=e.mealEntries,o=e.selectedFood,s=e.amount,l=e.measure,c=e.dayEntry,i=e.selectedFoodDetails,u=e.composition,d=e.mealareaIsLoading,m=e.searchareaIsLoading,p=e.sFoodItems,f=e.dayFat,h=e.dayCarbs,g=e.dayProtein,E=e.newFoodForm,y=e.dishSelected,b=y?i:o?o.state.foodItem:k.defaultFoodItem,v=b.foodname,S=b.brand,N=b.fat,C=b.carbs,x=b.protein,F=b.price,D=b.pic;return r.a.createElement("main",{className:"mainDailyMeals boxShow"},r.a.createElement("div",{id:"dayArea",className:"subblock boxShow"},r.a.createElement("div",{className:"dayHeader"},r.a.createElement("div",{className:"datepick boxShow"},r.a.createElement("label",{className:"textHigh"},"Day: "),r.a.createElement("button",{disabled:d,onClick:function(e){return n.onDayButtons(e,-1)},className:"ftButton"}," ","<"),r.a.createElement("input",{disabled:d,onChange:function(e){return n.loadDailyMeals(e.currentTarget.value)},id:"selectedDay",type:"date",value:t}),r.a.createElement("button",{disabled:d,onClick:function(e){return n.onDayButtons(e,1)},className:"ftButton"},">")),d?"LOADING...":r.a.createElement(w,{removeNote:n.onRemoveNote,note:c.note,key:"D"+(c.note?c.note.noteid:"D0"),updateAttach:n.onUpdateAttach})),r.a.createElement("div",{className:"mealsArea"},d?"LOADING...":a),r.a.createElement("hr",null),r.a.createElement("div",{className:"dayTotal"},r.a.createElement("span",null,"Day Total:"),r.a.createElement("span",null,"".concat(f.toFixed(1),"||").concat(h.toFixed(1),"||").concat(g.toFixed(1)))),r.a.createElement("button",{disabled:d,onClick:n.onCommit,className:"ftButton"},"COMMIT DAY!")),r.a.createElement("div",{id:"addFoodArea",className:"subblock boxShow"},E?r.a.createElement("div",{className:"newFoodForm"},r.a.createElement("div",{className:"newFoodHeader"},r.a.createElement("label",{className:"textHigh"},"Create New Food:"),r.a.createElement("button",{onClick:function(){return n.setState({newFoodForm:!1})},className:"ftButton"},"+Select")),r.a.createElement("span",null,"Name:"),r.a.createElement("input",{onChange:function(e){return n.changeNewFoodValue("foodname",e.currentTarget.value)},placeholder:"name",type:"text",maxLength:"50"}),r.a.createElement("span",null,"Brand:"),r.a.createElement("input",{onChange:function(e){return n.changeNewFoodValue("brand",e.currentTarget.value)},placeholder:"brand",type:"text",maxLength:"50"}),r.a.createElement("span",null,"Macros:"),r.a.createElement("div",null,r.a.createElement("input",{onChange:function(e){return n.changeNewFoodValue("fat",e.currentTarget.value)},type:"text",placeholder:"0",maxLength:"5"}),r.a.createElement("span",null,"Fat"),r.a.createElement("input",{onChange:function(e){return n.changeNewFoodValue("carbs",e.currentTarget.value)},type:"text",placeholder:"0",maxLength:"5"}),r.a.createElement("span",null,"Carbs"),r.a.createElement("input",{onChange:function(e){return n.changeNewFoodValue("protein",e.currentTarget.value)},type:"text",placeholder:"0",maxLength:"5"}),r.a.createElement("span",null,"Protein")),r.a.createElement("span",null,"Per:"),r.a.createElement("div",null,r.a.createElement("select",{onChange:function(e){return n.changeNewFoodValue("per",e.currentTarget.value)},className:"smallerInput"},r.a.createElement("option",null,"100Grams"),r.a.createElement("option",null,"1Piece")),r.a.createElement("span",null,"Piece Size:"),r.a.createElement("input",{onChange:function(e){return n.changeNewFoodValue("sizeinfo",e.currentTarget.value)},className:"PSInput smallerInput",defaultValue:"100",placeholder:"null",type:"text",maxLength:"5"})),r.a.createElement("span",null,"Price:"),r.a.createElement("div",null,r.a.createElement("input",{onChange:function(e){return n.changeNewFoodValue("price",e.currentTarget.value)},className:"smallerInput",placeholder:"0",type:"text",maxLength:"10"}),r.a.createElement("div",null,r.a.createElement("span",null,"Is Dish?"),r.a.createElement("input",{onChange:function(e){return n.changeNewFoodValue("isdish",e.currentTarget.checked)},type:"checkbox"}))),r.a.createElement("label",{className:"afaInfo"},"To add certain details (dish, composition, photo, note)or further edit foods go to Your Foods section.")):[r.a.createElement("div",{className:"searchForm boxShow",key:"searchForm"},r.a.createElement("label",{className:"textHigh"},"Search Food: "),r.a.createElement("input",{onChange:function(e){return n.loadSFoodItems(document.querySelector("#search").value,e.currentTarget.checked)},id:"isAll",type:"checkbox",maxLength:"100"}),"ALL",r.a.createElement("button",{onClick:function(){return n.setState({newFoodForm:!0,selectedFood:null,measure:"Grams",amount:100})},className:"ftButton"},"+New"),r.a.createElement("input",{onChange:function(e){return n.loadSFoodItems(e.currentTarget.value,document.querySelector("#isAll").checked)},onKeyDown:n.onSearchKey,id:"search",type:"text",placeholder:"search text"})),r.a.createElement("div",{className:"searchResults boxShow",key:"searchResults"},m?"LOADING...":p)],r.a.createElement("div",{className:"amountForm boxShow"},r.a.createElement("label",{className:"textHigh"},"Quantity: "),r.a.createElement("input",{disabled:m,id:"amountSize",type:"text",value:s,onChange:function(e){return n.setState({amount:e.currentTarget.value})},onKeyDown:n.onAmountKey,placeholder:o?"Pieces"===l?1:0===o.state.foodItem.sizeinfo?100:o.state.foodItem.sizeinfo:0,maxLength:"10"}),r.a.createElement("select",{onChange:function(e){return n.setState({measure:e.currentTarget.value})},disabled:m,id:"measureSelect",value:l},r.a.createElement("option",{className:o?null===o.state.foodItem.sizeinfo?"hidden":"":"hidden"},"Grams"),r.a.createElement("option",{className:o?0===o.state.foodItem.sizeinfo?"hidden":"":"hidden"},"Pieces"),r.a.createElement("option",{className:"hidden"},"---"))),r.a.createElement("div",{className:"searchEntry boxShow"},r.a.createElement("label",{className:"textHigh lineDown"},"Current Entry:"),n.currentEntry(),r.a.createElement("button",{disabled:m,onClick:n.onAddNewFoodEntry,className:"ftButton"},"ADD FOOD ENTRY")),r.a.createElement("hr",null),r.a.createElement("div",{className:"addMealArea"},r.a.createElement("div",null,r.a.createElement("label",{className:"textHigh"},"Meal Name:"),r.a.createElement("input",{className:"newMName",type:"text",placeholder:"Meal"+(a.length+1)}),r.a.createElement("label",{className:"textHigh"},"Portion:"),r.a.createElement("input",{className:"newMPortion",type:"text",placeholder:"1",maxLength:"5"})),r.a.createElement("button",{disabled:d,onClick:n.onAddNewMeal,className:"newMeal ftButton"},"ADD NEW MEAL"))),i?r.a.createElement("div",{onClick:n.onDishSelect,id:"foodDetailsArea",className:"subblock boxShow"+(y?" highlight":"")},r.a.createElement("div",{className:"foodDetailsHeader"},r.a.createElement("div",{className:"textHigh boxShow"},"".concat(v," ").concat(S?"@"+S:""))),r.a.createElement("div",{className:"foodPic boxShow"},r.a.createElement("img",{src:"FoodPics/".concat(D||"empty.png"),alt:"[NO FOOD PIC]"})),r.a.createElement("div",{className:"foodInfo"},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("td",{colSpan:"2"},v)),r.a.createElement("tr",null,r.a.createElement("th",null,"Brand"),r.a.createElement("td",{colSpan:"2"},S||"--")),r.a.createElement("tr",null,r.a.createElement("th",null,"Macro"),r.a.createElement("th",null,"100g"),r.a.createElement("th",null,"1p"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Fat"),r.a.createElement("td",null,"Grams"===(y?i.measure:l)?N+"g":"--"),r.a.createElement("td",null,"Pieces"===(y?i.measure:l)?N+"g":"--")),r.a.createElement("tr",null,r.a.createElement("td",null,"Carbs"),r.a.createElement("td",null,"Grams"===(y?i.measure:l)?C+"g":"--"),r.a.createElement("td",null,"Pieces"===(y?i.measure:l)?C+"g":"--")),r.a.createElement("tr",null,r.a.createElement("td",null,"Protein"),r.a.createElement("td",null,"Grams"===(y?i.measure:l)?x+"g":"--"),r.a.createElement("td",null,"Pieces"===(y?i.measure:l)?x+"g":"--")),r.a.createElement("tr",null,r.a.createElement("td",null,"Calories"),r.a.createElement("td",null,"Grams"===(y?i.measure:l)?(9*N+4*x+4*C).toFixed(1)+"Kc":"--"),r.a.createElement("td",null,"Pieces"===(y?i.measure:l)?(9*N+4*x+4*C).toFixed(1)+"Kc":"--")),r.a.createElement("tr",null,r.a.createElement("td",null,"Price"),r.a.createElement("td",null,"Grams"===(y?i.measure:l)?F+"Lei":"--"),r.a.createElement("td",null,"Pieces"===(y?i.measure:l)?F+"Lei":"--")))),r.a.createElement("div",{className:"comp textHigh"},o&&o.state.foodItem.isdish||y?"Composition:":""),r.a.createElement("div",{className:"foodEntries boxShow"},y||o&&o.state.foodItem.isdish?u:""),r.a.createElement("div",{className:"tcenter"},y?r.a.createElement("button",{onClick:n.saveDishIngr,className:"ftButton"},"SAVE DISH"):"",y?r.a.createElement("button",{onClick:n.calculateValues,className:"ftButton"},"ADD VALUES"):""))):r.a.createElement("div",{id:"foodDetailsArea",className:"subblock boxShow"},"LOADING..."))},n.newFoodKey="mustchange",n.state={selectedDay:G.dateToStr("Guest"===G.state.currentUser.access?new Date("2020-06-07"):new Date),dayEntry:{},dayFat:0,dayCarbs:0,dayProtein:0,mealEntries:[],mealCounter:0,selectedMeal:null,mealareaIsLoading:!0,selectedFood:null,sFoodItems:[],sFoodCounter:0,searchareaIsLoading:!0,searchCounter:0,amount:"",measure:"---",newFoodForm:!1,newFoodItem:{foodname:"",brand:"",fat:0,carbs:0,protein:0,price:0,sizeinfo:100,isdish:!1,pic:"empty.png",userid:G.state.currentUser.userid,noteid:null,foodentries:null},selectedFoodDetails:null,composition:[],dishSelected:!1},n.loadDailyMeals(n.state.selectedDay),n.loadSFoodItems("",!1),n}return a}(r.a.Component),D=function(){return r.a.createElement("main",{className:"boxShow"},r.a.createElement("div",{className:"subblock"},r.a.createElement("h1",null,"YOUR FOOD!")))},M=function(){return r.a.createElement("main",{className:"boxShow"},r.a.createElement("div",{className:"subblock"},r.a.createElement("h1",null,"YOUR PLANS!")))},O=function(){return r.a.createElement("main",{className:"boxShow"},r.a.createElement("div",{className:"subblock"},r.a.createElement("h1",null,"YOUR STATS!")))},P=function(){return r.a.createElement("main",{className:"boxShow"},r.a.createElement("div",{className:"subblock"},r.a.createElement("h1",null,"GLOBAL STATS!")))},I=function(){return r.a.createElement("main",{className:"boxShow"},r.a.createElement("div",{className:"subblock"},r.a.createElement("h1",null,"USERS DATA!")))},_=(a(9),function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(l.a)(this,a),(n=t.call(this,e)).passRegex=/^(?=.*?\d)(?=.*?[a-zA-Z]).+$/,n.onChangeProfile=function(){var e=Object(E.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n.setState({isLoading:!0}),Object(E.a)(h.a.mark((function e(){var t,a,r,o,s,l,c,i,u,d,m;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=n.state,a=t.username,r=t.email,o=t.firstname,s=t.lastname,l=t.dob,c=t.sex,i=t.describe,u=t.pic,d=t.diet,!(""!==l&&new Date(l)>new Date)){e.next=6;break}n.setState({warning:"dob"}),e.next=13;break;case 6:return e.next=8,fetch(G.getServerURL()+"/profile",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({userid:G.state.currentUser.userid,username:a,email:r,firstname:""===o?null:o,lastname:""===s?null:s,dob:""===l?null:l,sex:""===c?null:c,describe:""===i?null:i,pic:""===u?null:u,diet:d})});case 8:return m=e.sent,e.next=11,m.json();case 11:(m=e.sent).includes("Username")?n.setState({warning:"username"}):m.includes("Email")?n.setState({warning:"email"}):"User Profile Updated!"===m?G.updateUserProfile(n.state):console.log(m);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.log("___________ERROR___________\n",e.t0.message);case 18:return e.prev=18,n.setState({isLoading:!1}),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[0,15,18,21]])})))();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.cancelChangeProfile=function(e){e.preventDefault();var t=G.state.currentUser,a=t.username,r=t.email,o=t.firstname,s=t.lastname,l=t.dob,c=t.sex,i=t.pic,u=t.describe,d=t.diet;n.setState({username:a,email:r,firstname:o,lastname:s,dob:l,sex:c,describe:u,pic:i,diet:d})},n.onChangePassword=function(e){e.preventDefault();var t=n.state,a=t.passNow,r=t.passNew,o=t.passConfirm;r.match(n.passRegex)?r!==o?n.setState({warning:"passConfirm"}):(e.preventDefault(),n.setState({isLoading:!0}),Object(E.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(G.getServerURL()+"/profile/changepass",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({userid:G.state.currentUser.userid,oldpass:a,newpass:r})});case 3:return t=e.sent,e.next=6,t.json();case 6:t=e.sent,console.log(t),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("___________ERROR___________\n",e.t0.message);case 13:return e.prev=13,n.setState({isLoading:!1}),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,10,13,16]])})))()):n.setState({warning:"passNew"})},n.browseUserPic=function(e){e.preventDefault(),alert("Sorry. Not implemented yet...")},n.render=function(){var e=n.state,t=e.username,a=e.email,o=e.firstname,s=e.lastname,l=e.dob,c=e.sex,i=e.describe,u=e.pic,d=e.diet,m=e.warning,p=e.isLoading;return r.a.createElement("main",{className:"mainRegLog boxShow"},r.a.createElement("form",{onSubmit:n.onChangeProfile,onReset:n.cancelChangeProfile,id:"regform",className:"subblock boxShow"},r.a.createElement("h1",{className:"lineDown"},"Profile Info"),r.a.createElement("div",{className:"fields"},r.a.createElement("span",null,"Username:"),r.a.createElement("input",{onChange:function(e){return n.setState({username:e.currentTarget.value})},type:"text",name:"username",value:t,minLength:"3"}),r.a.createElement("span",{className:"warning"+("username"===m?"":" hidden")},"Username is Already Taken!"),r.a.createElement("span",null,"Email:"),r.a.createElement("input",{onChange:function(e){return n.setState({email:e.currentTarget.value})},type:"text",name:"email",value:a}),r.a.createElement("span",{className:"warning"+("email"===m?"":" hidden")},"Email is Already Taken!"),r.a.createElement("div",{className:"personal"},r.a.createElement("div",null,r.a.createElement("img",{src:"UserPics/"+u,alt:"[NO PIC]"}),r.a.createElement("br",null),r.a.createElement("button",{disabled:p,onClick:n.browseUserPic,className:"ftButton"},"Browse")),r.a.createElement("div",null,r.a.createElement("span",null,"Description:"),r.a.createElement("br",null),r.a.createElement("textarea",{onChange:function(e){return n.setState({describe:e.currentTarget.value})},value:i,placeholder:"Say who you are in a few short phrases.."}))),r.a.createElement("span",null,"First Name:"),r.a.createElement("input",{onChange:function(e){return n.setState({firstname:e.currentTarget.value})},type:"text",name:"firstname",value:o}),r.a.createElement("span",null,"Last Name:"),r.a.createElement("input",{onChange:function(e){return n.setState({lastname:e.currentTarget.value})},type:"text",name:"lastname",value:s}),r.a.createElement("div",null,r.a.createElement("span",null,"Sex:"),r.a.createElement("input",{onChange:function(e){return n.setState({sex:"1"})},type:"radio",name:"sex",value:"male",checked:"1"===c}),r.a.createElement("span",null,"Male "),r.a.createElement("input",{onChange:function(e){return n.setState({sex:"0"})},type:"radio",name:"sex",value:"female",checked:"0"===c}),r.a.createElement("span",null,"Female")),r.a.createElement("span",null,"Date Of Birth:"),r.a.createElement("input",{onChange:function(e){return n.setState({dob:e.currentTarget.value})},type:"date",name:"dob",value:l}),r.a.createElement("span",{className:"warning"+("dob"===m?"":" hidden")},"Incorrect date!"),r.a.createElement("span",null,"Diet Plans:"),r.a.createElement("select",{value:d||"none",onChange:function(e){return n.setState({diet:"none"===e.currentTarget.value?null:e.currentTarget.value})}},r.a.createElement("option",null,"none"),r.a.createElement("option",null,"Calorie Restrict"),r.a.createElement("option",null,"Paleo"),r.a.createElement("option",null,"Keto"),r.a.createElement("option",null,"Mediterranian"),r.a.createElement("option",null,"Vegetarian"),r.a.createElement("option",null,"Vegan"),r.a.createElement("option",null,"Carnivore"),r.a.createElement("option",null,"Low Carb"),r.a.createElement("option",null,"Low Fat"),r.a.createElement("option",null,"PSMF"),r.a.createElement("option",null,"Specific/Personal Plan")),r.a.createElement("div",{className:"profileButtons"},r.a.createElement("input",{disabled:p,className:"ftButton",type:"submit",value:"Save Changes"}),r.a.createElement("input",{disabled:p,className:"ftButton",type:"reset",value:"Cancel"})))),r.a.createElement("form",{onSubmit:n.onChangePassword,id:"logform",className:"subblock boxShow"},r.a.createElement("h1",{className:"lineDown"},"Change Password"),r.a.createElement("div",{className:"fields"},r.a.createElement("span",null,"Current Password:"),r.a.createElement("input",{onChange:function(e){return n.setState({passNow:e.currentTarget.value})},type:"password",name:"passnow",minLength:"8"}),r.a.createElement("span",null,"New Password: "),r.a.createElement("input",{onChange:function(e){return n.setState({passNew:e.currentTarget.value})},type:"password",name:"passnew",minLength:"8"}),r.a.createElement("span",{className:"warning"+("passNew"===m?"":" hidden")},"Invalid Password!"),r.a.createElement("span",{className:"detail"},"Password must be at least 8characters long and have both numbers and letters!"),r.a.createElement("span",null,"Confirm New Password:"),r.a.createElement("input",{onChange:function(e){return n.setState({passConfirm:e.currentTarget.value})},type:"password",name:"passConfirm",minLength:"8"}),r.a.createElement("span",{className:"warning"+("passConfirm"===m?"":" hidden")},"Passwords do Not Match!"),r.a.createElement("div",{className:"profileButtons"},r.a.createElement("input",{disabled:p,className:"ftButton",type:"submit",value:"Save Changes"}),r.a.createElement("input",{disabled:p,className:"ftButton",type:"reset",value:"Cancel"})))))};var o=G.state.currentUser,s=o.username,c=o.email,i=o.firstname,u=o.lastname,d=o.dob,m=o.sex,p=o.describe,f=o.pic,g=o.diet;return n.state={username:s,email:c,firstname:i,lastname:u,dob:d,sex:m,describe:p,pic:f,diet:g,passNow:"",passNew:"",passConfirm:"",warning:null,isLoading:!1},n}return a}(r.a.Component)),L=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onLogin=function(){var e=Object(E.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n.setState({isLoading:!0}),Object(E.a)(h.a.mark((function e(){var t,a,r,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=document.querySelectorAll("#logform input"),a=t[0].value,r=t[1].value,e.next=6,fetch(G.getServerURL()+"/login",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a,pass:r})});case 6:if(200!==(o=e.sent).status){e.next=14;break}return e.next=10,o.json();case 10:"string"===typeof(o=e.sent)?n.setState({warningMsg:o}):(G.updateUser(o),G.changeMainPage("Profile")),e.next=19;break;case 14:return e.t0=console,e.next=17,o.json();case 17:e.t1=e.sent,e.t0.log.call(e.t0,e.t1);case 19:e.next=24;break;case 21:e.prev=21,e.t2=e.catch(0),console.log("___________ERROR___________\n",e.t2.message);case 24:return e.prev=24,n.setState({isLoading:!1}),e.finish(24);case 27:case"end":return e.stop()}}),e,null,[[0,21,24,27]])})))();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.render=function(){var e=n.state,t=e.warningMsg,a=e.isLoading;return r.a.createElement("main",{className:"mainRegLog boxShow"},r.a.createElement("form",{onSubmit:n.onLogin,id:"logform",className:"subblock boxShow"},r.a.createElement("h1",{className:"lineDown"},"Enter Username/Email and Password to Login!"),r.a.createElement("div",{className:"fields"},r.a.createElement("span",null,"Username/Email: "),r.a.createElement("input",{type:"text",name:"username"}),r.a.createElement("span",null,"Password: "),r.a.createElement("input",{type:"password",name:"password"}),r.a.createElement("span",{disabled:a},"Remember Me? ",r.a.createElement("input",{type:"checkbox",name:"member"})),r.a.createElement("span",{className:null===t?"hidden":"warning"},n.state.warningMsg),r.a.createElement("input",{disabled:a,className:"ftButton",type:"submit",value:"Login"})),r.a.createElement("div",{className:"loglinks"},r.a.createElement("span",{disabled:a,onClick:function(){return G.changeMainPage("Home")}},"Forgot Password?"),r.a.createElement("span",{disabled:a,onClick:function(){return G.changeMainPage("Register")}},"New here? Go Register!"))))},n.state={warningMsg:null,isLoading:!1},n}return a}(r.a.Component),j=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).passRegex=/^(?=.*?\d)(?=.*?[a-zA-Z]).+$/,n.onRegister=function(){var e=Object(E.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n.setState({isLoading:!0}),Object(E.a)(h.a.mark((function e(){var t,a,r,o,s,l,c,i,u,d,m,p,f;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=n.state,a=t.pass,r=t.passC,o=t.username,s=t.email,l=t.firstname,c=t.lastname,i=t.dob,u=t.sex,d=t.describe,m=t.pic,p=t.diet,a.match(n.passRegex)){e.next=6;break}n.setState({warning:"pass"}),e.next=21;break;case 6:if(a===r){e.next=10;break}n.setState({warning:"passC"}),e.next=21;break;case 10:if(!(""!==i&&new Date(i)>new Date)){e.next=14;break}n.setState({warning:"dob"}),e.next=21;break;case 14:return e.next=16,fetch(G.getServerURL()+"/register",{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:o,email:s,firstname:""===l?null:l,lastname:""===c?null:c,dob:""===i?null:i,sex:""===u?null:u,describe:""===d?null:d,pic:""===m?null:m,diet:"none"===p?null:p,pass:a})});case 16:return f=e.sent,e.next=19,f.json();case 19:(f=e.sent).userid?G.changeMainPage("Login"):f.includes("Username")?n.setState({warning:"username"}):f.includes("Email")?n.setState({warning:"email"}):console.log(f);case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(0),console.log("___________ERROR___________\n",e.t0.message);case 26:return e.prev=26,n.setState({isLoading:!1}),e.finish(26);case 29:case"end":return e.stop()}}),e,null,[[0,23,26,29]])})))();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.browseUserPic=function(e){e.preventDefault(),alert("Sorry. Not implemented yet...")},n.render=function(){var e=n.state,t=e.sex,a=e.warning,o=e.isLoading;return r.a.createElement("main",{className:"mainRegLog boxShow"},r.a.createElement("form",{onSubmit:n.onRegister,id:"regform",className:"subblock boxShow"},r.a.createElement("h1",{className:"lineDown"},"Please Complete Required fields to Register"),r.a.createElement("div",{className:"fields"},r.a.createElement("span",{className:"req"},"Username:"),r.a.createElement("input",{onChange:function(e){return n.setState({username:e.currentTarget.value})},type:"text",name:"username",pattern:".{3,}",required:!0,title:"3 characters minimum"}),r.a.createElement("span",{className:"warning"+("username"===a?"":" hidden")},"Username is Already Taken!"),r.a.createElement("span",{className:"req"},"Email:"),r.a.createElement("input",{onChange:function(e){return n.setState({email:e.currentTarget.value})},type:"email",name:"email"}),r.a.createElement("span",{className:"warning"+("email"===a?"":" hidden")},"Email is Already Taken!"),r.a.createElement("span",{className:"req"},"Password:"),r.a.createElement("input",{onChange:function(e){return n.setState({pass:e.currentTarget.value})},className:"pass",type:"password",name:"password",minLength:"8"}),r.a.createElement("span",{className:"warning"+("pass"===a?"":" hidden")},"Invalid Password!"),r.a.createElement("span",{className:"detail"},"Password must be at least 8characters long and have both numbers and letters!"),r.a.createElement("span",{className:"req"},"Confirm Password:"),r.a.createElement("input",{onChange:function(e){return n.setState({passC:e.currentTarget.value})},type:"password",name:"cpass",minLength:"8"}),r.a.createElement("span",{className:"warning"+("passC"===a?"":" hidden")},"Passwords do Not Match!"),r.a.createElement("span",null,"First Name*:"),r.a.createElement("input",{onChange:function(e){return n.setState({firstname:e.currentTarget.value})},type:"text",name:"firstname"}),r.a.createElement("span",null,"Last Name*:"),r.a.createElement("input",{onChange:function(e){return n.setState({lastname:e.currentTarget.value})},type:"text",name:"lastname"}),r.a.createElement("span",null,"Date Of Birth*:"),r.a.createElement("input",{onChange:function(e){return n.setState({dob:e.currentTarget.value})},type:"date",name:"dob"}),r.a.createElement("span",{className:"warning"+("dob"===a?"":" hidden")},"Incorrect date!"),r.a.createElement("div",null,r.a.createElement("span",null,"Sex*:"),r.a.createElement("input",{onChange:function(e){return n.setState({sex:"1"})},type:"radio",name:"sex",value:"male",checked:"1"===t}),r.a.createElement("span",null,"Male "),r.a.createElement("input",{onChange:function(e){return n.setState({sex:"0"})},type:"radio",name:"sex",value:"female",checked:"0"===t}),r.a.createElement("span",null,"Female")),r.a.createElement("div",{className:"personal"},r.a.createElement("div",null,r.a.createElement("img",{src:"UserPics/profileEmpty.png",alt:"[NO PIC]"}),r.a.createElement("br",null),r.a.createElement("button",{disabled:o,onClick:n.browseUserPic,className:"ftButton"},"Browse*")),r.a.createElement("div",null,r.a.createElement("span",null,"Short Description*:"),r.a.createElement("br",null),r.a.createElement("textarea",{onChange:function(e){return n.setState({describe:e.currentTarget.value})},placeholder:"Say who you are in a few short phrases.."}))),r.a.createElement("span",null,"Diet Plans*?"),r.a.createElement("select",{onChange:function(e){return n.setState({diet:"none"===e.currentTarget.value?null:e.currentTarget.value})}},r.a.createElement("option",null,"none"),r.a.createElement("option",null,"Calorie Restrict"),r.a.createElement("option",null,"Paleo"),r.a.createElement("option",null,"Keto"),r.a.createElement("option",null,"Mediterranian"),r.a.createElement("option",null,"Vegetarian"),r.a.createElement("option",null,"Vegan"),r.a.createElement("option",null,"Carnivore"),r.a.createElement("option",null,"Low Carb"),r.a.createElement("option",null,"Low Fat"),r.a.createElement("option",null,"PSMF"),r.a.createElement("option",null,"Specific Personal Plan")),r.a.createElement("span",{className:"detail"},"-Pick a Diet from list if any of them apply to You - Can always change it later!"),r.a.createElement("span",{className:"detail"},"(This Choice is simply for tracking stats - Will Not affect results &recommendations)"),r.a.createElement("input",{disabled:o,className:"ftButton",type:"submit",value:"Register"}))))},n.state={username:null,email:null,pass:null,passC:null,firstname:null,lastname:null,dob:null,sex:null,pic:null,desc:null,diet:null,warning:null,isLoading:!1},n}return a}(r.a.Component),T=function(){return r.a.createElement("main",{className:"boxShow"},r.a.createElement("div",{className:"subblock"},r.a.createElement("h1",null,"Error! Page does not exist!")))},R=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).changePage=function(e){n.state.page!==e&&n.setState({page:e})},n.render=function(){switch(n.state.page){case"Home":return r.a.createElement(p,null);case"DailyMeals":return r.a.createElement(F,null);case"YourFood":return r.a.createElement(D,null);case"YourPlans":return r.a.createElement(M,null);case"YourStats":return r.a.createElement(O,null);case"GlobalStats":return r.a.createElement(P,null);case"GlobalData":return r.a.createElement(I,null);case"Profile":return r.a.createElement(_,null);case"Register":return r.a.createElement(j,null);case"Login":return r.a.createElement(L,null);default:return r.a.createElement(T,null)}},n.state={page:e.page?e.page:"Home"},n}return a}(r.a.Component),U=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).render=function(){return r.a.createElement("footer",{className:"subblock boxShow"},r.a.createElement("h3",{id:"author"},"--Made by Rotariu Stefan",r.a.createElement("sub",null," - StravoS")))},e}return a}(r.a.Component),A=a(12),V={main:r.a.createRef(),footer:r.a.createRef(),header:r.a.createRef(),nav:r.a.createRef()},G=null,z=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).dateToStr=function(e){return"".concat(e.getFullYear(),"-").concat(e.getMonth()+1>9?(e.getMonth()+1).toString():"0"+(e.getMonth()+1).toString(),"-").concat(e.getDate()>9?e.getDate().toString():"0"+e.getDate().toString())},n.getServerURL=function(){return A.serverLink},n.updateUser=function(e){var t=Object(c.a)(n).defaultUser;null===e?(n.setState({currentUser:t}),V.header.current.updateUser(!1,t.username,t.pic)):(e.dob=n.dateToStr(new Date(e.dob)),n.setState({currentUser:e}),V.header.current.updateUser(!0,e.username,e.pic))},n.updateUserProfile=function(e){var t=n.state.currentUser;t.username=e.username,t.email=e.email,t.firstname=e.firstname,t.lastname=e.lastname,t.dob=e.dob,t.sex=e.sex,t.describe=e.describe,t.pic=e.pic,t.diet=e.diet,n.setState({currentUser:t})},n.changeMainPage=function(e){return V.main.current.changePage(e)},n.render=function(){return[r.a.createElement(d,{ref:V.header,key:"H"}),r.a.createElement(m,{ref:V.nav,key:"N"}),r.a.createElement(R,{ref:V.main,page:"Home",key:"M"}),r.a.createElement(U,{ref:V.footer,key:"F"})]},n.defaultUser={userid:0,username:"Guest",email:"guest@nomail.none",firstname:"John",lastname:"Doe",dob:n.dateToStr(new Date),sex:"1",describe:"placeholder",pic:"profileEmpty.png",diet:null,default_meals:"Breakfast,Lunch,Dinner",access:"Guest"},n.state={currentUser:n.defaultUser},G=Object(c.a)(n),n}return a}(r.a.Component);s.a.render(r.a.createElement(z,null),document.querySelector("#root"))},9:function(e,t,a){}},[[13,1,2]]]);
//# sourceMappingURL=main.dbad4ce2.chunk.js.map